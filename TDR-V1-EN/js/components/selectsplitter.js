!function(c){"use strict";function i(e,t){this.init("selectsplitter",e,t)}i.DEFAULTS={template:'<div class="row" data-selectsplitter-wrapper-selector><div class="col-xs-12 col-sm-6"><select class="form-select" data-selectsplitter-firstselect-selector></select></div> \x3c!-- Add the extra clearfix for only the required viewport --\x3e<div class="col-xs-12 col-sm-6"><select class="form-select" data-selectsplitter-secondselect-selector></select></div></div>'},i.prototype.init=function(e,t,r){var l,s=this,o=(s.type=e,s.$element=c(t),s.$element.hide(),s.options=c.extend({},i.DEFAULTS,r),s.fullCategoryList={},0),n=0,a=(s.$element.find("optgroup").each(function(){s.fullCategoryList[c(this).attr("label")]={};var e=c(this),r=0,l={};c(this).find("option").each(function(){var e=c(this).attr("value"),t=c(this).text();l[c(this).index()]={x:e,y:t},r++}),n<r&&(n=r),s.fullCategoryList[e.attr("label")]=l,o++}),"");for(l in s.fullCategoryList)s.fullCategoryList.hasOwnProperty(l)&&(a=a+"<option>"+l+"</option>");s.$element.after(s.options.template),s.$wrapper=s.$element.next("div[data-selectsplitter-wrapper-selector]"),s.$firstSelect=c("select[data-selectsplitter-firstselect-selector]",s.$wrapper),s.$secondSelect=c("select[data-selectsplitter-secondselect-selector]",s.$wrapper);e=Math.max(o,n,2),e=Math.min(e,10);s.$firstSelect.attr("size",e),s.$secondSelect.attr("size",e),s.$firstSelect.append(a),s.$firstSelect.on("change",c.proxy(s.updateParentCategory,s)),s.$secondSelect.on("change",c.proxy(s.updateChildCategory,s)),s.$selectedOption="",s.currentParentCategory="",s.currentChildCategory="",s.$element.find("option[selected=selected]").length&&(s.$selectedOption=s.$element.find("option[selected=selected]"),s.currentParentCategory=s.$selectedOption.closest("optgroup").attr("label"),s.currentChildCategory=s.$selectedOption.attr("value"),s.$firstSelect.find("option:contains("+s.currentParentCategory+")").attr("selected","selected"),s.$firstSelect.trigger("change"))},i.prototype.updateParentCategory=function(){var e,t=this,r=(t.currentParentCategory=t.$firstSelect.val(),t.$secondSelect.empty(),"");for(e in t.fullCategoryList[t.currentParentCategory])t.fullCategoryList[t.currentParentCategory].hasOwnProperty(e)&&(r=r+'<option value="'+t.fullCategoryList[t.currentParentCategory][e].x+'">'+t.fullCategoryList[t.currentParentCategory][e].y+"</option>");t.$secondSelect.append(r),t.$selectedOption&&t.$secondSelect.find('option[value="'+t.$selectedOption.attr("value")+'"]').attr("selected","selected")},i.prototype.updateChildCategory=function(e){var t=this;t.currentChildCategory=c(e.target).val(),t.$element.find("option[selected=selected]").removeAttr("selected"),t.$element.find('option[value="'+t.currentChildCategory+'"]').attr("selected","selected"),t.$element.trigger("change"),t.$selectedOption=t.$element.find("option[selected=selected]")},i.prototype.destroy=function(){var e=this;e.$wrapper.remove(),e.$element.removeData(e.type),e.$element.show()},c.fn.selectsplitter=function(r){return this.each(function(){var e=c(this),t=e.data("selectsplitter");!t&&"destroy"==r||(t||e.data("selectsplitter",t=new i(this,"object"==typeof r&&r)),"string"!=typeof r)||t[r]()})},c.fn.selectsplitter.Constructor=i}(jQuery);