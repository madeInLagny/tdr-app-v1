!function(){"use strict";function r(t){return function(n){return e=typeof(n=n),(null===n?"null":"object"==e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e)===t;var e}}function o(e){return function(n){return typeof n===e}}var x=r("string"),p=r("object"),s=r("array"),u=o("boolean"),i=function(n){return!(null==n)},c=o("function"),d=o("number"),I=function(){},m=function(n){return function(){return n}},a=function(n){return n};function D(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=o.concat(n);return r.apply(null,t)}}function S(){return Z}function T(t){function n(){return o}function e(n){return n(t)}var r=m(t),o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:O,isNone:l,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return T(n(t))},each:function(n){n(t)},bind:e,exists:e,forall:e,filter:function(n){return n(t)?o:Z},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(l,function(n){return e(t,n)})}};return o}function R(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return B.some(t);return B.none()}function G(n){return[n]}function X(n){return fn(n,0)}function Y(n){return fn(n,n.length-1)}function J(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return B.none()}var Q=function(e){return function(n){return!e(n)}},l=m(!1),O=m(!0),Z=(Hn=function(n){return n.isNone()},{fold:function(n,e){return n()},is:l,isSome:l,isNone:O,getOr:Fn=function(n){return n},getOrThunk:n=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:Fn,orThunk:n,map:S,each:I,bind:S,exists:l,forall:O,filter:S,equals:Hn,equals_:Hn,toArray:function(){return[]},toString:m("none()")}),B={some:T,none:S,from:function(n){return null==n?Z:T(n)}},nn=Array.prototype.slice,en=Array.prototype.indexOf,tn=Array.prototype.push,E=function(n,e){return-1<en.call(n,e)},v=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return!0;return!1},rn=function(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t},P=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},M=function(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)},N=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},on=function(n,e,t){for(var r,o=n,u=o.length-1;0<=u;u--)r=o[u],t=e(t,r);return t},W=function(n,e,t){return M(n,function(n){t=e(t,n)}),t},un=function(n,e){for(var t=n,r=e,o=l,u=0,i=t.length;u<i;u++){var c=t[u];if(r(c,u))return B.some(c);if(o(c,u))break}return B.none()},cn=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!s(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);tn.apply(e,n[t])}return e},w=function(n,e){return cn(P(n,e))},ln=function(n,e){for(var t=0,r=n.length;t<r;++t)if(!0!==e(n[t],t))return!1;return!0},an=function(n,e){for(var t={},r=0,o=n.length;r<o;r++){var u=n[r];t[String(u)]=e(u,r)}return t},fn=function(n,e){return 0<=e&&e<n.length?B.some(n[e]):B.none()},A=function(){return(A=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function sn(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),o=0,e=0;e<t;e++)for(var u=arguments[e],i=0,c=u.length;i<c;i++,o++)r[o]=u[i];return r}function mn(){return dn(0,0)}function dn(n,e){return{major:n,minor:e}}function gn(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e}function t(n,e){return-1!==n.indexOf(e)}function pn(n){return 0<n.length}function hn(e){return function(n){return t(n,e)}}function bn(n){function e(n){return function(){return t===n}}var t=n.current,n=n.version;return{current:t,version:n,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(Vn),isSafari:e("Safari")}}function vn(n){function e(n){return function(){return t===n}}var t=n.current,n=n.version;return{current:t,version:n,isWindows:e($n),isiOS:e("iOS"),isAndroid:e(Gn),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(Xn),isFreeBSD:e(Yn),isChromeOS:e(Jn)}}function wn(n,e){var t,r,o,u,i,c,l=qn.browsers(),a=qn.oses(),l=jn(l,c=n).map(function(n){var e=Wn.detect(n.versionRegexes,c);return{current:n.name,version:e}}).fold(Un,Kn),a=jn(a,i=n).map(function(n){var e=Wn.detect(n.versionRegexes,i);return{current:n.name,version:e}}).fold(Qn,Zn);return{browser:l,os:a,deviceType:(l=l,n=n,e=e,t=(a=a).isiOS()&&!0===/ipad/i.test(n),r=a.isiOS()&&!t,o=(u=a.isiOS()||a.isAndroid())||e("(pointer:coarse)"),e=t||!r&&u&&e("(min-device-width:768px)"),u=r||u&&!e,l=l.isSafari()&&a.isiOS()&&!1===/safari/i.test(n),n=!u&&!e&&!l,{isiPad:m(t),isiPhone:m(r),isTablet:m(e),isPhone:m(u),isTouch:m(o),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:m(l),isDesktop:m(n)})}}function yn(n){return window.matchMedia(n).matches}function Cn(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}}function xn(n,e){return ne().browser.isIE()?(o=e,r=(r=n).dom,o=e.dom,t=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(o)&t)):(r=n.dom)!==(o=e.dom)&&r.contains(o);var t,r,o}function Sn(n,t){return r=function(n,e){return{k:e,v:t(n,e)}},o={},z(n,function(n,e){n=r(n,e);o[n.k]=n.v}),o;var r,o}function Tn(n){return oe(n).length}function Rn(n,e){return ae(n,e)&&void 0!==n[e]&&null!==n[e]}function Dn(e){return function(n){return ge(n)===e}}function On(n){return 8===ge(n)||"#comment"===_(n)}function An(n){return be(n)?n:ye(n)}function kn(n,e){for(var t=c(e)?e:l,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=j.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o}function In(n){return B.from(n.dom.previousSibling).map(j.fromDom)}function Bn(n){return j.fromDom(n.dom.host)}function En(n,e,t){return r=function(n){return ee(n,e)},N(kn(n,t),r);var r}function Pn(n,e){return e=e,n=void 0===n?document:n.dom,te(n)?[]:P(n.querySelectorAll(e),j.fromDom)}var Mn,Nn=function(t){var r,o=!1;return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o||(o=!0,r=t.apply(null,n)),r}},Wn={nu:dn,detect:function(n,e){var t,r,e=String(e).toLowerCase();return 0===n.length?mn():(r=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}}(n=n,t=e))?dn((n=function(n){return Number(t.replace(r,"$"+n))})(1),n(2)):{major:0,minor:0}},unknown:mn},jn=function(n,e){var t=String(e).toLowerCase();return un(n,function(n){return n.search(t)})},Ln=function(n,e){return gn(n,e,0)},zn=function(n,e){return gn(n,e,n.length-e.length)},_n=(Mn=/^\s+|\s+$/g,function(n){return n.replace(Mn,"")}),Fn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return t(n,"edge/")&&t(n,"chrome")&&t(n,"safari")&&t(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fn],search:function(n){return t(n,"chrome")&&!t(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return t(n,"msie")||t(n,"trident")}},{name:"Opera",versionRegexes:[Fn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:hn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:hn("firefox")},{name:"Safari",versionRegexes:[Fn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(t(n,"safari")||t(n,"mobile/"))&&t(n,"applewebkit")}}],Hn=[{name:"Windows",search:hn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return t(n,"iphone")||t(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:hn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:hn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:hn("linux"),versionRegexes:[]},{name:"Solaris",search:hn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:hn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:hn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],qn={browsers:m(n),oses:m(Hn)},Vn="Firefox",Un=function(){return bn({current:void 0,version:Wn.unknown()})},Kn=bn,$n=(m("Edge"),m("Chrome"),m("IE"),m("Opera"),m(Vn),m("Safari"),"Windows"),Gn="Android",Xn="Solaris",Yn="FreeBSD",Jn="ChromeOS",Qn=function(){return vn({current:void 0,version:Wn.unknown()})},Zn=vn,ne=(m($n),m("iOS"),m(Gn),m("Linux"),m("OSX"),m(Xn),m(Yn),m(Jn),Nn(function(){return wn(navigator.userAgent,yn)})),j={fromHtml:function(n,e){e=(e||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Cn(e.childNodes[0])},fromTag:function(n,e){e=(e||document).createElement(n);return Cn(e)},fromText:function(n,e){e=(e||document).createTextNode(n);return Cn(e)},fromDom:Cn,fromPoint:function(n,e,t){return B.from(n.dom.elementFromPoint(e,t)).map(Cn)}},ee=function(n,e){n=n.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},te=function(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount},L=function(n,e){return n.dom===e.dom},re=ee,oe=Object.keys,ue=Object.hasOwnProperty,z=function(n,e){for(var t=oe(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}},ie=function(n,e){var t={},r=e,o=t,u=function(n,e){o[e]=n},i=I;return z(n,function(n,e){(r(n,e)?u:i)(n,e)}),t},ce=function(n,t){var r=[];return z(n,function(n,e){r.push(t(n,e))}),r},le=function(n,e){return ae(n,e)?B.from(n[e]):B.none()},ae=function(n,e){return ue.call(n,e)},fe=["tfoot","thead","tbody","colgroup"],se=function(n,e,t){return{element:n,rowspan:e,colspan:t}},me=function(n,e,t){return{element:n,cells:e,section:t}},k=function(n,e,t){return{element:n,isNew:e,isLocked:t}},de=function(n,e){return{cells:n,section:e}},_=("undefined"==typeof window&&Function("return this;")(),function(n){return n.dom.nodeName.toLowerCase()}),ge=function(n){return n.dom.nodeType},pe=Dn(1),he=Dn(3),be=Dn(9),ve=Dn(11),we=function(e){return function(n){return pe(n)&&_(n)===e}},ye=function(n){return j.fromDom(n.dom.ownerDocument)},Ce=function(n){return B.from(n.dom.parentNode).map(j.fromDom)},xe=function(n){return B.from(n.dom.nextSibling).map(j.fromDom)},F=function(n){return P(n.dom.childNodes,j.fromDom)},Se=function(n,e){n=n.dom.childNodes;return B.from(n[e]).map(j.fromDom)},Fn=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode),Te=m(Fn),Re=Fn?function(n){return j.fromDom(n.dom.getRootNode())}:An,De=function(n){var e,t,r,o,u=he(n)?n.dom.parentNode:n.dom;return null!=u&&null!==u.ownerDocument&&(r=u.ownerDocument,n=j.fromDom(u),n=Re(n),(ve(o=n)&&i(o.dom.host)?B.some(n):B.none()).fold(function(){return r.body.contains(u)},(e=De,t=Bn,function(n){return e(t(n))})))},Oe=function(n){n=n.dom.body;if(null==n)throw new Error("Body is not available yet");return j.fromDom(n)},Ae=function(n,e){var t=[];return M(F(n),function(n){t=(t=e(n)?t.concat([n]):t).concat(Ae(n,e))}),t},ke=function(n,e){return t=function(n){return ee(n,e)},N(F(n),t);var t};function Ie(n,e,t,r,o){return n(t,r)?B.some(t):c(o)&&o(t)?B.none():e(t,r,o)}function Be(n,e){return e=e,n=void 0===n?document:n.dom,te(n)?B.none():B.from(n.querySelector(e)).map(j.fromDom)}function Ee(n,e){var t=n.dom;z(e,function(n,e){gt(t,e,n)})}function Pe(n,e){return null===(n=n.dom.getAttribute(e))?void 0:n}function Me(n){return W(n.dom.attributes,function(n,e){return n[e.name]=e.value,n},{})}function Ne(n,e){var t=n.dom;z(e,function(n,e){bt(t,e,n)})}function We(n,e){return n=n.dom,n=wt(n,e),B.from(n).filter(function(n){return 0<n.length})}function je(n,e){var t=n.dom;ht(t=t)&&t.style.removeProperty(e),pt(n,"style").map(_n).is("")&&H(n,"style")}function Le(n,e){return yt(n,e,1)}function ze(n){return 1<Le(n,"rowspan")}function _e(n,e){return parseInt(vt(n,e),10)}function Fe(n){return Tt(n,"tr")}function He(n){return q(n).fold(m([]),function(n){return ke(n,"colgroup")})}function qe(n,t){return P(n,function(n){var e;return"colgroup"===_(n)?(e=P(At(n),function(n){var e=yt(n,"span",1);return se(n,1,e)}),me(n,e,"colgroup")):(e=P(Ot(n),function(n){var e=yt(n,"rowspan",1),t=yt(n,"colspan",1);return se(n,e,t)}),me(n,e,t(n)))})}function Ve(n){return Ce(n).map(function(n){n=_(n);return E(fe,n)?n:"tbody"}).getOr("tbody")}function Ue(n){var e=Fe(n),n=sn(He(n),e);return qe(n,Ve)}function Ke(n,e,t){return kt(n,e,[t])}function $e(n){return pt(n,Nt).bind(function(n){return B.from(n.match(/\d+/g))}).map(function(n){return an(n,O)})}function Ge(n,e){return n=w(n.all,function(n){return n.cells}),N(n,e)}function Xe(n){var l={},e=[],t={},a=X(n).map(function(n){return n.element}).bind(q).bind($e).getOr({}),u=0,f=0,s=0;return M(n,function(n){var c,r,o;"colgroup"===n.section?(r={},o=0,M(n.cells,function(e){var t=e.colspan;rn(t,function(n){n=o+n;r[n]={element:e.element,colspan:t,column:n}}),o+=t}),t=r):(c=[],M(n.cells,function(n){for(var e=0;void 0!==l[s+","+e];)e++;for(var t=Rn(a,e.toString()),r={element:n.element,rowspan:n.rowspan,colspan:n.colspan,row:s,column:e,isLocked:t},o=0;o<n.colspan;o++)for(var u=0;u<n.rowspan;u++){var i=e+o;l[s+u+","+i]=r,f=Math.max(f,i+1)}c.push(r)}),u++,e.push(me(n.element,c,n.section)),s++)}),{grid:{rows:u,columns:f},access:l,all:e,columns:t}}function Ye(n,e){var t=e.column,r=e.column+e.colspan-1,o=e.row,e=e.row+e.rowspan-1;return t<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&e>=n.startRow}function Je(n,e){return e.column>=n.startCol&&e.column+e.colspan-1<=n.finishCol&&e.row>=n.startRow&&e.row+e.rowspan-1<=n.finishRow}function Qe(n,e,t){var e=U.findItem(n,e,L),r=U.findItem(n,t,L);return e.bind(function(t){return r.map(function(n){return e=t,n=n,{startRow:Math.min(e.row,n.row),startCol:Math.min(e.column,n.column),finishRow:Math.max(e.row+e.rowspan-1,n.row+n.rowspan-1),finishCol:Math.max(e.column+e.colspan-1,n.column+n.colspan-1)};var e})})}function Ze(c,n,e){return Qe(c,n,e).bind(function(n){for(var e=c,t=n,r=!0,o=D(Je,t),u=t.startRow;u<=t.finishRow;u++)for(var i=t.startCol;i<=t.finishCol;i++)r=r&&U.getAt(e,u,i).exists(o);return r?B.some(t):B.none()})}function nt(e,n,t){return Qe(e,n,t).map(function(n){n=U.filterItems(e,D(Ye,n));return P(n,function(n){return n.element})})}function et(n,e){return U.findItem(n,e,function(n,e){return xn(e,n)}).map(function(n){return n.element})}function tt(n,e,t,r,o){var u=jt(n),t=L(n,t)?B.some(e):et(u,e),i=L(n,o)?B.some(r):et(u,r);return t.bind(function(e){return i.bind(function(n){return nt(u,e,n)})})}function rt(n,e){Lt(n,e),K(e,n)}function ot(t,r){M(r,function(n,e){e=0===e?t:r[e-1];zt(e,n)})}function ut(n){var e,t=F(n);0<t.length&&(e=n,M(t,function(n){Lt(e,n)})),qt(n)}function it(n){return Vt.get(n)}function ct(n){return Vt.getOption(n)}function lt(n,e){return Vt.set(n,e)}var at,ft,st=function(n,e,t){for(var r=n.dom,o=c(t)?t:l;r.parentNode;){var r=r.parentNode,u=j.fromDom(r);if(e(u))return B.some(u);if(o(u))break}return B.none()},mt=function(n,e,t){return st(n,function(n){return ee(n,e)},t)},dt=function(n,e){return t=function(n){return ee(n,e)},un(n.dom.childNodes,function(n){return t(j.fromDom(n))}).map(j.fromDom);var t},h=function(n,e,t){return Ie(ee,mt,n,e,t)},gt=function(n,e,t){if(!(x(t)||u(t)||d(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},b=function(n,e,t){gt(n.dom,e,t)},pt=function(n,e){return B.from(Pe(n,e))},H=function(n,e){n.dom.removeAttribute(e)},ht=function(n){return void 0!==n.style&&c(n.style.getPropertyValue)},bt=function(n,e,t){if(!x(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);ht(n)&&n.style.setProperty(e,t)},y=function(n,e,t){n=n.dom;bt(n,e,t)},vt=function(n,e){var t=n.dom,r=window.getComputedStyle(t).getPropertyValue(e);return""!==r||De(n)?r:wt(t,e)},wt=function(n,e){return ht(n)?n.style.getPropertyValue(e):""},yt=function(n,e,t){return void 0===t&&(t=0),pt(n,e).map(function(n){return parseInt(n,10)}).getOr(t)},Ct=function(n){return 1<Le(n,"colspan")},xt=m(10),St=m(10),Tt=function(n,e){return Rt(n,e,O)},Rt=function(n,e,t){return w(F(n),function(n){return ee(n,e)?t(n)?[n]:[]:Rt(n,e,t)})},Dt=function(n,e){return t=["td","th"],(r=void 0===(r=e)?l:e)(e=n)?B.none():E(t,_(e))?B.some(e):mt(e,t.join(","),function(n){return ee(n,"table")||r(n)});var t,r},Ot=function(n){return Tt(n,"th,td")},At=function(n){return ee(n,"colgroup")?ke(n,"col"):w(He(n),function(n){return ke(n,"col")})},q=function(n,e){return h(n,"table",e)},kt=function(n,e,t){var r=n.cells,o=r.slice(0,e),r=r.slice(e),e=o.concat(t).concat(r);return Bt(n,e)},It=function(n,e,t){n.cells[e]=t},Bt=function(n,e){return de(e,n.section)},Et=function(n,e){var t=n.cells,t=P(t,e);return de(t,n.section)},Pt=function(n,e){return n.cells[e]},V=function(n,e){return Pt(n,e).element},Mt=function(n){return n.cells.length},g=function(n){n=function(n){for(var e=[],t=[],r=0,o=n.length;r<o;r++){var u=n[r];("colgroup"===u.section?e:t).push(u)}return{pass:e,fail:t}}(n);return{rows:n.fail,cols:n.pass}},Nt="data-snooker-locked-cols",Wt=function(n){var n=W(g(n).rows,function(t,n){return M(n.cells,function(n,e){n.isLocked&&(t[e]=!0)}),t},{}),n=ce(n,function(n,e){return parseInt(e,10)});return(n=nn.call(n,0)).sort(void 0),n},U={fromTable:function(n){n=Ue(n);return Xe(n)},generate:Xe,getAt:function(n,e,t){n=n.access[e+","+t];return void 0!==n?B.some(n):B.none()},findItem:function(n,e,t){n=Ge(n,function(n){return t(e,n.element)});return 0<n.length?B.some(n[0]):B.none()},filterItems:Ge,justCells:function(n){return w(n.all,function(n){return n.cells})},justColumns:function(n){return n=n.columns,ce(n,function(n){return n})},hasColumns:function(n){return 0<oe(n.columns).length},getColumnAt:function(n,e){return B.from(n.columns[e])}},jt=U.fromTable,Lt=function(e,t){Ce(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},zt=function(n,e){xe(n).fold(function(){Ce(n).each(function(n){K(n,e)})},function(n){Lt(n,e)})},_t=function(e,t){Se(e,0).fold(function(){K(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})},K=function(n,e){n.dom.appendChild(e.dom)},Ft=function(e,n){M(n,function(n){K(e,n)})},Ht=function(n){n.dom.textContent="",M(F(n),function(n){qt(n)})},qt=function(n){n=n.dom;null!==n.parentNode&&n.parentNode.removeChild(n)},Vt=(at=he,{get:function(n){if(at(n))return ft(n).getOr("");throw new Error("Can only get text value of a text node")},getOption:ft=function(n){return at(n)?B.from(n.dom.nodeValue):B.none()},set:function(n,e){if(!at(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=e}}),Ut=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Kt(){return{up:m({selector:mt,closest:h,predicate:st,all:kn}),down:m({selector:Pn,predicate:Ae}),styles:m({get:vt,getRaw:We,set:y,remove:je}),attrs:m({get:Pe,set:b,remove:H,copyTo:function(n,e){n=Me(n);Ee(e,n)}}),insert:m({before:Lt,after:zt,afterAll:ot,append:K,appendAll:Ft,prepend:_t,wrap:rt}),remove:m({unwrap:ut,remove:qt}),create:m({nu:j.fromTag,clone:function(n){return j.fromDom(n.dom.cloneNode(!1))},text:j.fromText}),query:m({comparePosition:function(n,e){return n.dom.compareDocumentPosition(e.dom)},prevSibling:In,nextSibling:xe}),property:m({children:F,name:_,parent:Ce,document:function(n){return An(n).dom},isText:he,isComment:On,isElement:pe,isSpecial:function(n){n=_(n);return E(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],n)},getText:it,setText:lt,isBoundary:function(n){return!!pe(n)&&("body"===_(n)||E(Ut,_(n)))},isEmptyTag:function(n){return!!pe(n)&&E(["br","img","hr","input"],_(n))},isNonEditable:function(n){return pe(n)&&"false"===Pe(n,"contenteditable")}}),eq:L,is:re}}function $t(e,n,t,r){function o(e){return R(e,r).fold(function(){return e},function(n){return e.slice(0,n+1)})}void 0===r&&(r=l);var n=[n].concat(e.up().all(n)),t=[t].concat(e.up().all(t)),n=o(n),u=o(t),t=un(n,function(n){return v(u,D(e.eq,n))});return{firstpath:n,secondpath:u,shared:t}}function Gt(n){return mt(n,"table")}function Xt(n,e){return 0<(n=Pn(n,e)).length?B.some(n):B.none()}function Yt(n,e,r){return Be(n,e).bind(function(t){return Be(n,r).bind(function(e){return Ji(Gt,[t,e]).map(function(n){return{first:t,last:e,table:n}})})})}function Jt(n,t,r,o,e){return u=e,un(n,function(n){return ee(n,u)}).bind(function(n){return u=t,i=r,q(e=n).bind(function(n){var t=jt(n),r=u,o=i;return U.findItem(t,e,L).bind(function(n){var e=0<r?n.row+n.rowspan-1:n.row,n=0<o?n.column+n.colspan-1:n.column;return U.getAt(t,e+r,n+o).map(function(n){return n.element})})}).bind(function(n){return t=o,mt(e=n,"table").bind(function(n){return Be(n,t).bind(function(n){return Qi(n,e).bind(function(e){return e.boxes.map(function(n){return{boxes:n,start:e.start,finish:e.finish}})})})});var e,t});var e,u,i});var u}function Qt(r,n,e){return Yt(r,n,e).bind(function(o){function n(n){return L(r,n)}var e="thead,tfoot,tbody,table",t=mt(o.first,e,n),u=mt(o.last,e,n);return t.bind(function(r){return u.bind(function(n){return L(r,n)?(n=o.table,e=o.first,t=o.last,n=jt(n),Ze(n,e,t)):B.none();var e,t})})})}function Zt(i){if(!s(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],t={};return M(i,function(n,r){var e=oe(n);if(1!==e.length)throw new Error("one and only one name per case");var o=e[0],u=n[o];if(void 0!==t[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!s(u))throw new Error("case arguments must be an array");c.push(o),t[o]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=t.length;if(e!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+e);return{fold:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+n.length);return n[r].apply(null,t)},match:function(n){var e=oe(n);if(c.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+e.join(","));if(ln(c,function(n){return E(e,n)}))return n[o].apply(null,t);throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+c.join(", "))},log:function(n){console.log(n,{constructors:c,constructor:o,params:t})}}}}),t}function nr(n,e){return j.fromDom(n.dom.cloneNode(e))}function er(n){return nr(n,!1)}function tr(t,r){function n(n){var e=r(n);return e<=0||null===e?(n=vt(n,t),parseFloat(n)||0):e}function o(t,n){return W(n,function(n,e){e=vt(t,e),e=void 0===e?0:parseInt(e,10);return isNaN(e)?n:n+e},0)}return{set:function(n,e){if(!d(e)&&!e.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+e);n=n.dom;ht(n)&&(n.style[t]=e+"px")},get:n,getOuter:n,aggregate:o,max:function(n,e,t){n=o(n,t);return n<e?e-n:0}}}function rr(n,e,t){var r=n();return un(r,e).orThunk(function(){return B.from(r[0]).orThunk(t)}).map(function(n){return n.element})}function or(n){return dc.get(n)}function ur(n){return dc.getOuter(n)}function ir(t,r){return{left:t,top:r,translate:function(n,e){return ir(t+n,r+e)}}}function cr(n,e){return{row:n,y:e}}function lr(n,e){return{col:n,x:e}}function ar(n){return hc(n).left+ac(n)}function fr(n){return hc(n).left}function sr(n,e){return lr(n,fr(e))}function mr(n,e){return lr(n,ar(e))}function dr(n){return hc(n).top}function gr(n,e){return cr(n,dr(e))}function pr(n,e){return cr(n,dr(e)+ur(e))}function hr(t,e,r){var n,o;return 0===r.length?[]:(n=P(r.slice(1),function(n,e){return n.map(function(n){return t(e,n)})}),o=r[r.length-1].map(function(n){return e(r.length-1,n)}),n.concat([o]))}function br(){var n=ne().browser;return n.isIE()||n.isEdge()}function vr(n,e,t){return n=vt(n,e),e=t,t=parseFloat(n),isNaN(t)?e:t}function wr(n,e){y(n,"width",e+"px")}function yr(n,e){y(n,"width",e+"%")}function Cr(n,e){y(n,"height",e+"px")}function xr(n){var r,e,t,o,u,i,c,l=We(r=n,"height").getOrThunk(function(){return n=r,(br()?(t=(e=n).dom.getBoundingClientRect().height,"border-box"===vt(e,"box-sizing")?t:t-vr(e,"padding-top",0)-vr(e,"padding-bottom",0)-(vr(e,"border-top-width",0)+vr(e,"border-bottom-width",0))):vr(n,"height",or(n)))+"px";var n,e,t});return l?(l=l,e=n,t=or,o=Cr,c=parseInt(l,10),zn(l,"%")&&"table"!==_(e)?(u=c,i=t,l=o,o=q(t=e).map(function(n){n=i(n);return Math.floor(u/100*n)}).getOr(u),l(t,o),o):c):or(n)}function Sr(r,o){return Dc(r).fold(function(){var n=lc(r);return Oc(n,o)},function(n){return e=r,t=o,null!==(n=Tc.exec(n))?parseFloat(n[1]):(n=Sc(e),Oc(n,t));var e,t})}function Tr(n){return xr(n=n)/Le(n,"rowspan")}function Rr(n,e,t){y(n,"width",e+t)}function Dr(n){return n=n,e=lc,t=B.from(n.dom.offsetParent).map(j.fromDom).getOr(Oe(ye(n))),e(n)/e(t)*100+"%";var e,t}function Or(n,e,t){return We(n,e).fold(function(){return t(n)+"px"},function(n){return n})}function Ar(n,e){return Or(n,"width",function(n){return Bc(n)?lc(n):Ac(n,e)})}function kr(n){return Or(n,"height",Tr)}function Ir(n){return n.map(function(n){return n+"px"}).getOr("")}function Br(n,e,t){return Mc(n,e,Ac,function(n){return n.getOrThunk(t.minCellWidth)},t)}function Er(n,e,t,r,o){var n=sc(n),u=[B.some(t.edge(e))].concat(P(t.positions(n,e),function(n){return n.map(function(n){return n.y})}));return P(n,function(n,e){return Pc(n,e,u,Q(ze),r,o)})}function Pr(r){return Dc(r).fold(function(){return Wc(r)},function(n){return e=r,n=n,null!==(t=kc().exec(n))?jc(t[1],e):null!==(t=Ic().exec(n))?(n=parseInt(t[1],10),Lc(n,e)):(t=lc(e),Lc(t,e));var e,t})}function Mr(){var n=j.fromTag("td");return K(n,j.fromTag("br")),n}function Nr(){return j.fromTag("col")}function Wr(){return j.fromTag("colgroup")}function jr(n,e,t){e=e,r=n=n,e=j.fromTag(e),r=Me(r),Ee(e,r),r=e,e=F(oc(n)),Ft(r,e);var r,o=r;return z(t,function(n,e){null===n?H(o,e):b(o,e,n)}),o}function Lr(n){return n}function zr(n){return function(){return j.fromTag("tr",n.dom)}}function _r(n){return P(n,j.fromDom)}function Fr(n){return n.nodeName.toLowerCase()}function Hr(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n}function qr(n,e,t){for(var r=0,o=n;o<e;o++)r+=void 0!==t[o]?t[o]:0;return r}function Vr(n,e,t){n=al(n,e),M(n,function(n){t.setElementWidth(n.element,n.width)})}function Ur(o){return function(n,e,t,r){return o(t)?(r=Math.max(r,n[e]-Math.abs(t)),r=Math.abs(r-n[e]),0<=t?r:-r):t}}function Kr(n,e,t){var n=t.substring(0,t.length-n.length),r=parseFloat(n);return n===r.toString()?e(r):wl.invalid(t)}function $r(n,e,t){var r,o,u,i,t=yl.from(t),c=ln(n,function(n){return"0px"===n})?(r=n.length,c=t.fold(function(){return m("")},function(n){return m(n/r+"px")},function(){return m(100/r+"%")}),rn(r,c)):(o=n,u=e,t.fold(function(){return o},function(n){return t=(e=n)/u,P(o,function(n){return yl.from(n).fold(function(){return n},function(n){return n*t+"px"},function(n){return n/100*e+"px"})});var e,t},function(n){return e=u,P(o,function(n){return yl.from(n).fold(function(){return n},function(n){return n/e*100+"%"},function(n){return n+"%"})});var e}));return 0===(n=c).length?n:(t=(e=on(n,function(n,e){var t=yl.from(e).fold(function(){return{value:e,remainder:0}},function(n){return n=n,{value:(e=Math.floor(n))+"px",remainder:n-e};var e},function(n){return{value:n+"%",remainder:0}});return{output:[t.value].concat(n.output),remainder:n.remainder+t.remainder}},{output:[],remainder:0})).output).slice(0,t.length-1).concat([(n=t[t.length-1],i=Math.round(e.remainder),yl.from(n).fold(m(n),function(n){return n+i+"px"},function(n){return n+i+"%"}))])}function Gr(n,e){return 0===n.length?e:on(n,function(n,e){return yl.from(e).fold(m(0),a,a)+n},0)}function Xr(n){return Cl(n).fold(m("px"),m("px"),m("%"))}function Yr(l,n,e,a){var f=U.fromTable(l),i=f.all,s=U.justCells(f),m=U.justColumns(f);n.each(function(n){var t,r,o,u,e=Xr(n),i=lc(l),c=Mc(f,l,Ar,Ir,a),c=$r(c,i,n);U.hasColumns(f)?(o=c,u=e,M(m,function(n,e){e=Gr([o[e]],xt());y(n.element,"width",e+u)})):(t=c,r=e,M(s,function(n){var e=t.slice(n.column,n.colspan+n.column),e=Gr(e,xt());y(n.element,"width",e+r)})),y(l,"width",n)}),e.each(function(n){var e=Xr(n),t=or(l),r=Er(f,l,vc,kr,Ir),o=$r(r,t,n),r=i,u=e;M(s,function(n){var e=o.slice(n.row,n.rowspan+n.row),e=Gr(e,St());y(n.element,"height",e+u)}),M(r,function(n,e){y(n.element,"height",o[e])}),y(l,"height",n)})}function Jr(e){var o=[];return{bind:function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");o.push(n)},unbind:function(e){o=N(o,function(n){return n!==e})},trigger:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={};M(e,function(n,e){r[n]=t[e]}),M(o,function(n){n(r)})}}}function Qr(n){return{registry:Sn(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:Sn(n,function(n){return n.trigger})}}function Zr(o,u,i){if(0===u.length)throw new Error("You must specify at least one required field.");var t,e="required",n=u;if(s(n))return M(n,function(n){if(!x(n))throw new Error("The value "+n+" in the "+e+" fields was not a string.")}),t=Ol(u),un(t,function(n,e){return e<t.length-1&&n===t[e+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}),function(e){var t=oe(e);{var n;if(!ln(u,function(n){return E(t,n)}))throw n=t,new Error("All required keys ("+Ol(u).join(", ")+") were not specified. Specified keys were: "+Ol(n).join(", ")+".")}o(u,t);n=N(u,function(n){return!i.validate(e[n],n)});{var r;if(0<n.length)throw r=i.label,new Error("All values need to be of type: "+r+". Keys ("+Ol(n).join(", ")+") were not.")}return e};throw new Error("The "+e+" fields must be an array. Was: "+n+".")}function no(e,n){if(0<(n=N(n,function(n){return!E(e,n)})).length)throw new Error("Unsupported keys for object: "+Ol(n).join(", "))}function eo(n){return Zr(no,n,{validate:c,label:"function"})}function to(){n=Qr({move:Jr(["info"])});var n,o,u,e={onEvent:I,reset:I,events:n.registry},t=(o=B.none(),{onEvent:function(n,r){r.extract(n).each(function(n){var e=r,t=n,n=o.map(function(n){return e.compare(n,t)});o=B.some(t),n.each(function(n){u.trigger.move(n)})})},reset:function(){o=B.none()},events:(u=Qr({move:Jr(["info"])})).registry}),r=e;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=e},isOn:function(){return r===t},onEvent:function(n,e){r.onEvent(n,e)},events:t.events}}function ro(e,t,n){function r(){s.stop(),a.isOn()&&(a.off(),l.trigger.stop())}function o(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];c&&t.apply(null,n)}}var u,i,c=!1,l=Qr({start:Jr([]),stop:Jr([])}),a=to(),f=(u=r,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];null!==i&&clearTimeout(i),i=setTimeout(function(){u.apply(null,n),i=null},200)}}),s=(a.events.move.bind(function(n){t.mutate(e,n.info)}),t.sink(kl({forceDrop:r,drop:o(r),move:o(function(n){f.cancel(),a.onEvent(n,t)}),delayDrop:o(f.throttle)}),n));return{element:s.element,go:function(n){s.start(n),a.on(),l.trigger.start()},on:function(){c=!0},off:function(){c=!1},destroy:function(){s.destroy()},events:l.registry}}function oo(n,e,t,r,o){function u(n){i(n)&&c(Il(n))}var i,c;return i=t,c=r,n.dom.addEventListener(e,u,o),{unbind:D(Bl,n,e,u,o)}}function uo(n,e,t){return oo(n,e,El,t,!1)}function io(n){return void 0!==n.dom.classList}function co(n,e){io(n)?n.dom.classList.add(e):(e=e=e,e=Ml(n=n=n,"class").concat([e]),b(n,"class",e.join(" ")))}function lo(n,e){return io(n)&&n.dom.classList.contains(e)}function ao(n){var e=n.replace(/\./g,"-");return{resolve:function(n){return e+"-"+n}}}function fo(n){return"true"===Pe(n,"contenteditable")}function so(e,n,t){var r=e.origin();M(n,function(n){n.each(function(n){n=t(r,n);co(n,jl),K(e.parent(),n)})})}function mo(n,e){var t,r,o;_l(n),n.isResizable(e)&&(t=U.fromTable(e),r=sc(t),o=fc(t),Fl(t,n,e,r,o))}function go(n,e){n=Pn(n.parent(),"."+jl),M(n,e)}function po(n){go(n,function(n){y(n,"display","none")})}function ho(n){go(n,function(n){y(n,"display","block")})}function bo(o){function n(n,e){return B.from(Pe(n,e))}function u(n,e){return _e(n,e)-yt(n,"data-initial-"+e,0)}function t(n,e){p.trigger.startAdjust(),f.assign(n),b(n,"data-initial-"+e,_e(n,e)),co(n,Hl),y(n,"opacity","0.2"),s.go(o.parent())}function r(n){return L(n,o.view())}c=Qr({drag:Jr(["xDelta","yDelta","target"])}),l=B.none(),(a={mutate:function(n,e){i.trigger.drag(n,e)},events:(i=Qr({drag:Jr(["xDelta","yDelta"])})).registry}).events.drag.bind(function(e){l.each(function(n){c.trigger.drag(e.xDelta,e.yDelta,n)})});var e,i,c,l,a,f={assign:function(n){l=B.some(n)},get:function(){return l},mutate:a.mutate,events:c.registry},s=(e=void 0!==(a=void 0===(a={})?{}:a).mode?a.mode:Wl,ro(f,e,a)),m=B.none(),d=(f.events.drag.bind(function(t){n(t.target,"data-row").each(function(n){var e=_e(t.target,"top");y(t.target,"top",e+t.yDelta+"px")}),n(t.target,"data-column").each(function(n){var e=_e(t.target,"left");y(t.target,"left",e+t.xDelta+"px")})}),s.events.stop.bind(function(){f.get().each(function(r){m.each(function(t){n(r,"data-row").each(function(n){var e=u(r,"top");H(r,"data-initial-top"),p.trigger.adjustHeight(t,e,parseInt(n,10))}),n(r,"data-column").each(function(n){var e=u(r,"left");H(r,"data-initial-left"),p.trigger.adjustWidth(t,e,parseInt(n,10))}),mo(o,t)})})}),uo(o.parent(),"mousedown",function(n){var e=n.target;lo(e,Ll)&&t(n.target,"top"),e=n.target,lo(e,zl)&&t(n.target,"left")})),g=uo(o.view(),"mouseover",function(n){var e;e=n.target,h(e,"table",r).filter(function(n){return h(n,"[contenteditable]",r).exists(fo)}).fold(function(){De(n.target)&&_l(o)},function(n){m=B.some(n),mo(o,n)})}),p=Qr({adjustHeight:Jr(["table","delta","row"]),adjustWidth:Jr(["table","delta","column"]),startAdjust:Jr([])});return{destroy:function(){d.unbind(),g.unbind(),s.destroy(),_l(o)},refresh:function(n){mo(o,n)},on:s.on,off:s.off,hideBars:D(po,o),showBars:D(ho,o),events:p.registry}}function vo(n){return n.getParam("table_default_attributes",Xl,"object")}function wo(n){return n.getParam("table_default_styles",na(n=n)?(e=n.getBody().offsetWidth,A(A({},Gl),{width:e+"px"})):ea(n)?ie(Gl,function(n,e){return"width"!==e}):Gl,"object");var e}function yo(n){return n.getParam("table_cell_advtab",!0,"boolean")}function Co(n){return n.getParam("table_row_advtab",!0,"boolean")}function xo(n){return n.getParam("table_advtab",!0,"boolean")}function So(n){return n.getParam("table_style_by_css",!1,"boolean")}function To(n){var e="section",n=n.getParam("table_header_type",e,"string");return E(["section","cells","sectionCells","auto"],n)?n:e}function Ro(n){H(n,"width")}function Do(i){function c(n){return"TABLE"===n.nodeName}function l(n){return ia(i,n)}function a(){return(ra(i)?hl:pl)()}var f,s,u=B.none(),t=B.none(),r=B.none();return i.on("init",function(){n=ma;var n,e=(e=i).inline?vl(Jc(e),fa(),n):bl(j.fromDom(e.getDoc()),n);r=B.some(e),n=i.getParam("object_resizing",!0),(x(n)?"table"===n:n)&&i.getParam("table_resize_bars",!0,"boolean")&&(n=a(),(e=ql(e,n,l)).on(),e.events.startDrag.bind(function(n){u=B.some(i.selection.getRng())}),e.events.beforeResize.bind(function(n){var e,t=n.table.dom,r=i,o=Qc(e=t),t=Zc(t),n=sa+n.type;r.fire("ObjectResizeStart",{target:e,width:o,height:t,origin:n})}),e.events.afterResize.bind(function(n){var e,t,r=n.table,o=r.dom;el(r),u.each(function(n){i.selection.setRng(n),i.focus()}),r=i,t=Qc(e=o),o=Zc(o),n=sa+n.type,r.fire("ObjectResized",{target:e,width:t,height:o,origin:n}),i.undoManager.add()}),t=B.some(e))}),i.on("ObjectResizeStart",function(n){var e,t=n.target;c(t)&&(e=j.fromDom(t),M(i.dom.select(".mce-clonedresizable"),function(n){i.dom.addClass(n,"mce-"+ta(i)+"-columns")}),!Sl(e)&&na(i)?la(i,e):!xl(e)&&Zl(i)&&ca(i,e),Tl(e)&&Ln(n.origin,sa)&&ca(i,e),f=n.width,s=ea(i)?"":tl(i,t).getOr(""))}),i.on("ObjectResized",function(n){var e,t,r,o,u=n.target;c(u)&&(u=j.fromDom(u),t=n.origin,Ln(t,"corner-")&&(e=u,t=t,n=n.width,t=zn(t,"e"),""===s&&ca(i,e),n!==f&&""!==s?(y(e,"width",s),r=a(),o=l(e),t=ra(i)||t?Dl(e).columns-1:0,fl(e,n-f,t,r,o)):rl(s)&&(t=parseFloat(s.replace("%","")),y(e,"width",n*t/f+"%")),/^(\d+(\.\d+)?)px$/.test(s)&&(o=U.fromTable(r=e),U.hasColumns(o)||M(Ot(r),function(n){var e=vt(n,"width");y(n,"width",e),H(n,"width")}))),el(u),Kl(i,u.dom,$l))}),i.on("SwitchMode",function(){t.each(function(n){i.mode.isReadOnly()?n.hideBars():n.showBars()})}),{lazyResize:function(){return t},lazyWire:function(){return r.getOr(bl(j.fromDom(i.getBody()),ma))},destroy:function(){t.each(function(n){n.destroy()}),r.each(function(n){i.inline&&qt(n.parent())})}}}function Oo(n,e){return{element:n,offset:e}}function Ao(n,e){return(n.property().isText(e)?n.property().getText(e):n.property().children(e)).length}function ko(n,e){var t,e=da(n,e,n.query().prevSibling).getOr(e);return!n.property().isText(e)&&0<(t=n.property().children(e)).length?ko(n,t[t.length-1]):Oo(e,Ao(n,e))}function Io(i,n){function e(n,e){var t,r,o,u;0<n.length?(n=n,u=dt(r=i,o=t=e).getOrThunk(function(){var n=j.fromTag(o,ye(r).dom);return"thead"===o?va(r,"caption,colgroup",n):"colgroup"===o?va(r,"caption",n):K(r,n),n}),Ht(u),t=("colgroup"===t?l:c)(n),Ft(u,t)):dt(i,e).each(qt)}var t=[],r=[],c=function(n){return P(n,function(n){n.isNew&&t.push(n.element);var e=n.element;return Ht(e),M(n.cells,function(n){n.isNew&&r.push(n.element),ba(n.element,"colspan",n.colspan,1),ba(n.element,"rowspan",n.rowspan,1),K(e,n.element)}),e})},l=function(n){return w(n,function(n){return P(n.cells,function(n){return ba(n.element,"span",n.colspan,1),n.element})})},o=[],u=[],a=[],f=[];return M(n,function(n){switch(n.section){case"thead":o.push(n);break;case"tbody":u.push(n);break;case"tfoot":a.push(n);break;case"colgroup":f.push(n)}}),e(f,"colgroup"),e(o,"thead"),e(u,"tbody"),e(a,"tfoot"),{newRows:t,newCells:r}}function Bo(n,e){var t;return 0===n.length?0:(t=n[0],R(n,function(n){return!e(t.element,n.element)}).fold(function(){return n.length},function(n){return n}))}function Eo(n,e,t){var r,o=[];U.hasColumns(n)&&(r=P(U.justColumns(n),function(n){return k(n.element,t,!1)}),o.push(de(r,"colgroup")));for(var u=0;u<n.grid.rows;u++){for(var i=[],c=0;c<n.grid.columns;c++){var l=U.getAt(n,u,c).map(function(n){return k(n.element,t,n.isLocked)}).getOrThunk(function(){return k(e.gap(),!0,!1)});i.push(l)}var a=de(i,n.all[u].section);o.push(a)}return o}function Po(n,e){return n=wa(n,L),ya(n,e)}function e(a,e,f,s,m){return function(o,u,n,r,i,c){var l=U.fromTable(u);return e(l,n).map(function(n){var e=Eo(l,r,!1),e=a(e,n,L,m(r)),t=Wt(e.grid);return{info:n,grid:Po(e.grid,r),cursor:e.cursor,lockedColumns:t}}).bind(function(n){var e=Io(u,n.grid),t=B.from(i).getOrThunk(function(){return Pr(u)}),r=B.from(c).getOrThunk(hl);return f(u,n.grid,n.info,t,r),s(u),mo(o,u),H(u,Nt),0<n.lockedColumns.length&&b(u,Nt,n.lockedColumns.join(",")),B.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})})}}function Mo(e,n){return Dt(n.element).bind(function(n){return Ca(e,n)})}function No(n,e){return xa(n,e,O).map(function(n){return{cells:n,generators:e.generators,clipboard:e.clipboard}})}function Wo(n,e){return Mo(n,e).filter(function(n){return!n.isLocked})}function jo(n,e){return xa(n,e,function(n){return!n.isLocked})}function Lo(e,n){return ln(n,function(n){return Ca(e,n).exists(function(n){return!n.isLocked})})}function zo(t){return{is:function(n){return t===n},isValue:O,isError:l,getOr:m(t),getOrThunk:m(t),getOrDie:m(t),or:function(n){return zo(t)},orThunk:function(n){return zo(t)},fold:function(n,e){return e(t)},map:function(n){return zo(n(t))},mapError:function(n){return zo(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return B.some(t)}}}function _o(t){return{is:l,isValue:l,isError:O,getOr:a,getOrThunk:function(n){return n()},getOrDie:function(){throw n=String(t),new Error(n);var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,e){return n(t)},map:function(n){return _o(t)},mapError:function(n){return _o(n(t))},each:I,bind:function(n){return _o(t)},exists:l,forall:O,toOptional:B.none}}function Fo(n,e){return{rowDelta:0,colDelta:Mt(n[0])-Mt(e[0])}}function Ho(n,e){return{rowDelta:n.length-e.length,colDelta:0}}function qo(n,e,t,r){var o="colgroup"===e.section?t.col:t.cell;return rn(n,function(n){return k(o(),!0,r(n))})}function Vo(n,e,t){var r=e.colDelta<0?Ia:a,o=e.rowDelta<0?ka:a,u=Wt(n),i=Mt(n[0]),u=v(u,function(n){return n===i-1}),r=r(n,Math.abs(e.colDelta),t,u?i-1:i),n=Wt(r);return o(r,Math.abs(e.rowDelta),t,an(n,O))}function Uo(e,t,n){return N(n,function(n){return n>=e.column&&n<=Mt(t[0])+e.column})}function Ko(n,y,C,x,S){var e,t,r,o,u=Wt(y),T=(e=n,t=u,n=Mt(y[0]),r=rn(n-e.column,function(n){return n+e.column}),r=un(r,function(e){return ln(t,function(n){return n!==e})}).getOr(n-1),A(A({},e),{column:r})),R=Uo(T,C,u);return n=y,r=C,((u=T).row>=n.length||u.column>Mt(n[0])?Aa("invalid start address out of table bounds, row: "+u.row+", column: "+u.column):(u=(n=n.slice(u.row))[0].cells.slice(u.column),o=Mt(r[0]),r=r.length,Oa({rowDelta:n.length-r,colDelta:u.length-o}))).map(function(n){for(var e,t,n=A(A({},n),{colDelta:n.colDelta-R.length}),n=Vo(y,n,x),r=Wt(n),r=Uo(T,C,r),o=T,u=n,i=C,c=x,l=S,n=r,a=o.row,f=o.column,s=a+i.length,m=f+Mt(i[0])+n.length,d=an(n,O),g=a;g<s;g++)for(var p,h,b,v=0,w=f;w<m;w++)d[w]?v++:(t=w,h=void 0,h=D(l,Pt((b=u)[e=g],t).element),p=b[e],1<b.length&&1<Mt(p)&&(0<t&&h(V(p,t-1))||t<p.cells.length-1&&h(V(p,t+1))||0<e&&h(V(b[e-1],t))||e<b.length-1&&h(V(b[e+1],t)))&&Da(u,V(u[g],w),l,c.cell),h=(p=Pt(i[g-a],w-f-v)).element,b=c.replace(h),It(u[g],w,k(b,!0,p.isLocked)));return u})}function $o(t,n,e,r,o){var u=t,i=o,c=r.cell,o=(0<u&&u<n[0].cells.length&&M(n,function(n){var e=n.cells[u-1],t=n.cells[u];i(t.element,e.element)&&It(n,u,k(c(),!0,t.isLocked))}),Ho(e,n)),l=Vo(e,o,r),e=Ho(n,l),o=Vo(n,e,r);return P(o,function(n,e){return kt(n,t,l[e].cells)})}function Go(n,e,t,r,o){var i,c,l,u,a;m=e,i=n,c=o,l=r.cell,a=g(m).rows,0<i&&i<a.length&&(o=a[i-1].cells,u=c,o=W(o,function(n,e){return v(n,function(n){return u(n.element,e.element)})?n:n.concat([e])},[]),M(o,function(n){for(var o=B.none(),u=i;u<a.length;u++)for(var e=0;e<Mt(a[0]);e++)!function(e){var t=a[u],r=Pt(t,e);c(r.element,n.element)&&(o=o.isNone()?B.some(l()):o).each(function(n){It(t,e,k(n,!0,r.isLocked))})}(e)}));var f,s,m=Wt(e),o=Fo(e,t),o=A(A({},o),{colDelta:o.colDelta-m.length}),m=Vo(e,o,r),d=(o=g(m)).cols,o=o.rows,m=Wt(m),e=Fo(t,e),e=A(A({},e),{colDelta:e.colDelta+m.length}),m=(f=r,s=m,P(t,function(r){return W(s,function(n,e){var t=qo(1,r,f,O)[0];return Ke(n,e,t)},r)})),t=Vo(m,e,r);return d.concat(o.slice(0,n)).concat(t).concat(o.slice(n,o.length))}function Xo(n,t,e,r,o){var u=(n=g(n)).rows,n=n.cols,i=u.slice(0,t),c=u.slice(t),e=Et(u[e],function(n,e){return 0<t&&t<u.length&&r(V(u[t-1],e),V(u[t],e))?Pt(u[t],e):k(o(n.element,r),!0,n.isLocked)});return n.concat(i).concat([e]).concat(c)}function Yo(n,c,l,a,f){return P(n,function(n){var e,t,r,o,u,i=0<c&&c<Mt(n)&&a(V(n,c-1),V(n,c)),i=(t=(e=n).section,r=l,o=a,u=f,"colgroup"!==t&&i?Pt(e,c):(t=Pt(e,r),k(u(t.element,o),!0,!1)));return Ke(n,c,i)})}function Jo(n,t,r,o){return P(n,function(n){return Et(n,function(n){return e=n,v(t,function(n){return r(e.element,n.element)})?k(o(n.element,r),!0,n.isLocked):n;var e})})}function Qo(n,e,t,r){return void 0!==V(n[e],t)&&0<e&&r(V(n[e-1],t),V(n[e],t))}function Zo(n,e,t){return 0<e&&t(V(n,e-1),V(n,e))}function nu(t,r,o,n){var e=g(t).rows,e=w(e,function(n,e){return Qo(t,e,r,o)||Zo(n,r,o)?[]:[Pt(n,r)]});return Jo(t,e,o,n)}function eu(n,t,r,e){var o=g(n).rows,u=o[t],i=w(u.cells,function(n,e){return Qo(o,t,e,r)||Zo(u,e,r)?[]:[n]});return Jo(n,i,r,e)}function tu(n){return{element:n,colspan:yt(n,"colspan",1),rowspan:yt(n,"rowspan",1)}}function ru(n){return pt(n,"scope").map(function(n){return n.substr(0,3)})}function ou(t,r){function o(n){e=r(e=n);var e="col"!==_(e.element)?t.cell(e):t.col(e);return u.get().isNone()&&u.set(B.some(e)),i=B.some({item:n,replacement:e}),e}void 0===r&&(r=tu);var u=Nc(B.none()),i=B.none();return{getOrInit:function(e,t){return i.fold(function(){return o(e)},function(n){return t(e,n.item)?n.replacement:o(e)})},cursor:u.get}}function uu(o,c){return function(t){function u(n){var e=t.replace(n,c,{scope:o});return i.push({item:n,sub:e}),r.get().isNone()&&r.set(B.some(e)),e}var r=Nc(B.none()),i=[];return{replaceOrInit:function(e,t){return"col"===_(e)?e:(r=e,o=t,un(i,function(n){return o(n.item,r)}).fold(function(){return u(e)},function(n){return t(e,n.item)?n.sub:u(e)}));var r,o},cursor:r.get}}}function iu(r){var e=Nc(B.none());return{unmerge:function(t){e.get().isNone()&&e.set(B.some(t));var n=ru(t);return n.each(function(n){return b(t,"scope",n)}),function(){var e=r.cell({element:t,colspan:1,rowspan:1});return je(e,"width"),je(t,"width"),n.each(function(n){return b(e,"scope",n)}),e}},merge:function(e){return je(e[0],"width"),(0===(n=uc(P(e,ru))).length||(t=n[0],r=["row","col"],v(n,function(n){return n!==t&&E(r,n)}))?B.none():B.from(t)).fold(function(){return H(e[0],"scope")},function(n){return b(e[0],"scope",n+"group")}),m(e[0]);var t,r,n},cursor:e.get}}function cu(n){return n=n,n=Pa.property().name(n),E(Ea,n)}function lu(n){return n=n,n=Pa.property().name(n),E(["ol","ul"],n)}function au(n){function u(n){return"br"===_(n)}function t(o){return Kc(o).bind(function(t){var r=xe(t).map(function(n){return!!cu(n)||(e=e=n,!!E(["br","img","hr","input"],Pa.property().name(e))&&"img"!==_(n));var e}).getOr(!1);return Ce(t).map(function(n){return!0===r||"li"===_(e=n)||st(e,lu).isSome()||u(t)||cu(n)&&!L(o,n)?[]:[j.fromTag("br")];var e})}).getOr([])}var e=0===(e=w(n,function(n){var e=F(n);return ln(e,function(n){return u(n)||he(n)&&0===it(n).trim().length})?[]:e.concat(t(n))})).length?[j.fromTag("br")]:e;Ht(n[0]),Ft(n[0],e)}function fu(n){0===Ot(n).length&&qt(n)}function su(n,e){return{grid:n,cursor:e}}function mu(n,e,t){var r=g(n).rows;return du(r,e,t).orThunk(function(){return du(r,0,0)})}function du(n,e,t){return B.from(n[e]).bind(function(n){return B.from(n.cells[t]).bind(function(n){return B.from(n.element)})})}function gu(n,e,t){var r=g(n).rows;return su(n,du(r,e,t))}function pu(n){return W(n,function(n,e){return v(n,function(n){return n.row===e.row})?n:n.concat([e])},[]).sort(function(n,e){return n.row-e.row})}function hu(n,e,t){r=t.section;var r,t=qe(n,function(){return r}),n=U.generate(t);return Eo(n,e,!0)}function bu(n,e,t,r){var e=U.generate(e),o=r.getWidths(e,r);Vr(e,o,r)}function vu(n,e,t,r,o){var e=U.generate(e),u=r.getWidths(e,r),i=r.pixelWidth(),u=(o=o.calcRedestributedWidths(u,i,t.pixelDelta,r.isRelative)).newSizes,i=o.delta;Vr(e,u,r),r.adjustTableWidth(i)}function wu(n,e){var t=fc(n),n=Ba(e);return W(n,function(n,e){return n+t[e.column].map(ac).getOr(0)},0)}function yu(t){return function(e,n){return Sa(e,n).filter(function(n){return!(t?Na:Wa)(e,n)}).map(function(n){return{details:n,pixelDelta:wu(e,n)}})}}function Cu(t){return function(e,n){return No(e,n).filter(function(n){return!(t?Na:Wa)(e,n.cells)})}}function xu(n){return Fr(n.parentNode)}function Su(n,e){var t="thead"===xu(e),e=!v(e.cells,function(n){return"th"!==Fr(n)});return t||e?B.some({thead:t,ths:e}):B.none()}function Tu(e,n,t){var r,o,u=e.getParent(n,"table"),i=n.parentNode,c=Fr(i);t!==c&&((r=e.select(t,u)[0])||(r=e.create(t),o=u.firstChild,"thead"===t?Y(ke(j.fromDom(u),"caption,colgroup")).fold(function(){return u.insertBefore(r,o)},function(n){return e.insertAfter(r,n.dom)}):u.appendChild(r)),"tbody"===t&&"thead"===c&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),i.hasChildNodes()||e.remove(i))}function Ru(n,e,t,r){var o=n.dom,n=(n=n,e=e,i(t=t)&&Fr(e)!==t?(t=n.dom.rename(e,t),Ul(n,t),t):e);return void 0!==r&&o.setAttrib(n,"scope",r),n}function Du(o){return function(n,e){var t,r=_(n),r="col"===r||"colgroup"===r?q(t=n).bind(function(n){return Zi(n,ul.firstSelectedSelector)}).fold(function(){return t},function(n){return n[0]}):n;return h(r,o,e)}}function Ou(s,n,r){function e(n){return"table"===_(Jc(n))}function t(i,c,l,a,f){return function(n,e){el(n);var t=a(),r=j.fromDom(s.getDoc()),r=Xc(l,r,m),o=ia(s,n),u=(oa(s)?pl:hl)();return c(n)?i(t,n,e,r,o,u).bind(function(n){return M(n.newRows,function(n){Vl(s,n.dom)}),M(n.newCells,function(n){Ul(s,n.dom)}),n.cursor.map(function(n){var n=ga(pa,n),e=s.dom.createRng();return e.setStart(n.element.dom,n.offset),e.setEnd(n.element.dom,n.offset),{rng:e,effect:f}})}):B.none()}}function o(n,e){return le(n,"type").filter(function(n){return E(e,n)})}var m=ua(s),u=oa(s)?I:ha,i=t(Ha,function(n){return!1===e(s)||1<Dl(n).rows},I,n,C),c=t(Fa,function(n){return!1===e(s)||1<Dl(n).columns},I,n,C),l=t(ja,O,I,n,C),a=t(La,O,I,n,C),f=t(za,O,u,n,C),u=t(_a,O,u,n,C),d=t(Ua,O,I,n,C),g=t(Ka,O,I,n,C),p=t(Ga,O,I,n,C),h=t(Xa,O,I,n,C),b=t(Ya,O,I,n,C),v=t(Ja,O,I,n,C),w=t($a,O,I,n,C);return{deleteRow:i,deleteColumn:c,insertRowsBefore:l,insertRowsAfter:a,insertColumnsBefore:f,insertColumnsAfter:u,mergeCells:d,unmergeCells:g,pasteColsBefore:p,pasteColsAfter:h,pasteRowsBefore:b,pasteRowsAfter:v,pasteCells:w,setTableCellType:function(t,n){return o(n,["td","th"]).each(function(n){var e=P(of($(t),r),function(n){return n.dom});nf(t,e,n,null)})},setTableRowType:function(t,n){return o(n,["header","body","footer"]).each(function(e){P(uf($(t),ul.selected),function(n){return ef(t,n.dom,e)})})},makeColumnsHeader:t(qa,O,I,n,C),unmakeColumnsHeader:t(Va,O,I,n,C),getTableRowType:function(n){var e,t,n=uf($(n),ul.selected);if(0<n.length)return n=P(n,function(n){return Za(0,n.dom)}),e=E(n,"header"),t=E(n,"footer"),e||t?(n=E(n,"body"),!e||n||t?e||n||!t?"":"footer":"header"):"body"},getTableCellType:function(n){return Ma(of($(n),r),function(n){return"th"===_(n)}).getOr("")},getTableColType:Qa}}function Au(n,l,a,f){return rn(n,function(n){for(var e=l,t=a,r=f,o=n,u=j.fromTag("tr"),i=0;i<e;i++){var c=o<t||i<r?j.fromTag("th"):j.fromTag("td");i<r&&b(c,"scope","row"),o<t&&b(c,"scope","col"),K(c,j.fromTag("br")),K(u,c)}return u})}function ku(n,e){n.selection.select(e.dom,!0),n.selection.collapse(!0)}function Iu(f,s,m,d,g){var r=wo(f),p={styles:r,attributes:vo(f),colGroups:f.getParam("table_use_colgroups",!1,"boolean")};return f.undoManager.ignore(function(){i=m,c=s,a=g,n=d,e=To(f),void 0===(u=p)&&(u=cf),r=j.fromTag("table"),l="cells"!==e,Ne(r,u.styles),Ee(r,u.attributes),u.colGroups&&K(r,(u=c,t=j.fromTag("colgroup"),rn(u,function(){return K(t,j.fromTag("col"))}),t)),u=Math.min(i,a),l&&0<a&&(o=j.fromTag("thead"),K(r,o),e=Au(a,c,"sectionCells"===e?u:0,n),Ft(o,e)),o=j.fromTag("tbody"),K(r,o),e=Au(l?i-u:i,c,l?0:a,n),Ft(o,e);var n,e,t,r,o,u=r;b(u,"data-mce-id","__mce");i=u,c=j.fromTag("div"),l=j.fromDom(i.dom.cloneNode(!0)),K(c,l);var i,c,l,a=c.dom.innerHTML;f.insertContent(a),f.addVisual()}),Be(Jc(f),'table[data-mce-id="__mce"]').map(function(n){var e,t;return na(f)?la(f,n):ea(f)?aa(n):(Zl(f)||(t=r.width,x(t)&&-1!==t.indexOf("%")))&&ca(f,n),el(n),H(n,"data-mce-id"),e=f,M(Pn(n,"tr"),function(n){Vl(e,n.dom),M(Pn(n,"th,td"),function(n){Ul(e,n.dom)})}),t=f,Be(n,"td,th").each(D(ku,t)),n.dom}).getOr(null)}function Bu(n,e,t){var r=yt(n,e,1);1===t||r<=1?H(n,e):b(n,e,Math.min(t,r))}function Eu(n,e,t){for(var r=void 0,o=n.select("td,th",e),u=0;u<o.length;u++){var i=n.getStyle(o[u],t);if((r=void 0===r?i:r)!==i)return""}return r}function Pu(n,e,t){t&&n.formatter.apply("align"+t,{},e)}function Mu(e,t){df.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})}function Nu(n,e){return(e||[]).concat(P(n,function(n){var e=n.text||n.title;return Rn(n,"menu")?{text:e,items:Nu(n.menu)}:{text:e,value:n.value}}))}function Wu(e){return function(n){return Ln(n,"rgb")?e.toHex(n):n}}function ju(n,e){return e=j.fromDom(e),{borderwidth:We(e,"border-width").getOr(""),borderstyle:We(e,"border-style").getOr(""),bordercolor:We(e,"border-color").map(Wu(n)).getOr(""),backgroundcolor:We(e,"background-color").map(Wu(n)).getOr("")}}function Lu(n){var o=n[0],n=n.slice(1);return M(n,function(n){M(oe(o),function(r){z(n,function(n,e){var t=o[r];""!==t&&r===e&&t!==n&&(o[r]="")})})}),o}function zu(n){var e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}}function _u(n,e,t,r){return un(n,function(n){return t.formatter.matchNode(r,e+n)}).getOr("")}function Fu(n){return hf.concat((0<(n=Nu(n.getParam("table_cell_class_list",[],"array"))).length?B.some({name:"class",type:"listbox",label:"Class",items:n}):B.none()).toArray())}function Hu(u){return function(t,r){var o=t.dom;return{setAttrib:function(n,e){u&&!e||o.setAttrib(r,n,e)},setStyle:function(n,e){u&&!e||o.setStyle(r,n,e)},setFormat:function(n,e){u&&!e||(""===e?t.formatter.remove(n,{value:null},r,!0):t.formatter.apply(n,{value:e},r))}}}}function qu(t){return q(t[0]).map(function(n){var e=U.fromTable(n),n=U.justCells(e),n=N(n,function(e){return v(t,function(n){return L(e.element,n)})});return P(n,function(n){return{element:n.element.dom,column:U.getColumnAt(e,n.column).map(function(n){return n.element.dom})}})})}function Vu(u,i,f,n){var s=n.getData();n.close(),u.undoManager.transact(function(){var c,n,t,l,e,r,a,o;c=u,t=f,l=s,a=1===(n=i).length,o=ie(l,function(n,e){return t[e]!==n}),0<Tn(o)&&1<=n.length&&(e=q(n[0]),qu(n).each(function(n){M(n,function(n){var e,t,r,o=Ru(c,n.element,l.celltype),u=a?bf.normal(c,o):bf.ifTruthy(c,o),n=n.column.map(function(n){return a?bf.normal(c,n):bf.ifTruthy(c,n)}).getOr(u),i=l;(r=u).setAttrib("scope",i.scope),r.setAttrib("class",i.class),r.setStyle("height",Hr(i.height)),n.setStyle("width",Hr(i.width)),yo(c)&&((r=u).setFormat("tablecellbackgroundcolor",(n=l).backgroundcolor),r.setFormat("tablecellbordercolor",n.bordercolor),r.setFormat("tablecellborderstyle",n.borderstyle),r.setFormat("tablecellborderwidth",Hr(n.borderwidth))),a&&(Mu(c,o),e=c,t=o,df.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})),l.halign&&Pu(c,o,l.halign),l.valign&&(i=c,u=o,r=l.valign)&&i.formatter.apply("valign"+r,{},u)})}),r=0<Tn(ie(o,function(n,e){return"scope"!==e&&"celltype"!==e})),e.each(function(n){return Kl(c,n.dom,{structure:ae(o,"celltype"),style:r})})),u.focus()})}function Uu(n){return wf.concat((0<(n=Nu(n.getParam("table_row_class_list",[],"array"))).length?B.some({name:"class",type:"listbox",label:"Class",items:n}):B.none()).toArray())}function Ku(l,a,f,n){var s=n.getData();n.close(),l.undoManager.transact(function(){var o,n,u,i,e,t,c,r;o=l,u=f,i=s,c=1===(n=a).length,r=ie(i,function(n,e){return u[e]!==n}),0<Tn(r)&&(M(n,function(n){i.type!==Fr(n.parentNode)&&ef(o,n,i.type);var e,t=c?bf.normal(o,n):bf.ifTruthy(o,n),r=i;(e=t).setAttrib("class",r.class),e.setStyle("height",Hr(r.height)),Co(o)&&((e=t).setStyle("background-color",(r=i).backgroundcolor),e.setStyle("border-color",r.bordercolor),e.setStyle("border-style",r.borderstyle)),i.align!==u.align&&(Mu(o,n),Pu(o,n,i.align))}),e=ae(r,"type"),t=!e||1<Tn(r),q(j.fromDom(n[0])).each(function(n){return Kl(o,n.dom,{structure:e,style:t})})),l.focus()})}function $u(n,e,t,r){if("TD"===e.tagName||"TH"===e.tagName)x(t)?n.setStyle(e,t,r):n.setStyle(e,t);else if(e.children)for(var o=0;o<e.children.length;o++)$u(n,e.children[o],t,r)}function Gu(a,f,t,n){var s,m=a.dom,d=n.getData(),g=ie(d,function(n,e){return t[e]!==n});n.close(),""===d.class&&delete d.class,a.undoManager.transact(function(){var n;if(f||(i=parseInt(d.cols,10)||1,c=parseInt(d.rows,10)||1,f=Iu(a,i,c,0,0)),0<Tn(g)){var e=a,t=f,r=d,o,u=e.dom,i={},c={};if(i.class=r.class,c.height=Hr(r.height),u.getAttrib(t,"width")&&!So(e)?i.width=(o=r.width)?o.replace(/px$/,""):"":c.width=Hr(r.width),So(e)?(c["border-width"]=Hr(r.border),c["border-spacing"]=Hr(r.cellspacing)):(i.border=r.border,i.cellpadding=r.cellpadding,i.cellspacing=r.cellspacing),So(e)&&t.children)for(var l=0;l<t.children.length;l++)$u(u,t.children[l],{"border-width":Hr(r.border),padding:Hr(r.cellpadding)}),xo(e)&&$u(u,t.children[l],{"border-color":r.bordercolor});xo(e)&&(c["background-color"]=r.backgroundcolor,c["border-color"]=r.bordercolor,c["border-style"]=r.borderstyle),i.style=u.serializeStyle(A(A({},wo(e)),c)),u.setAttribs(t,A(A({},vo(e)),i)),(s=m.select("caption",f)[0])&&!d.caption&&m.remove(s),!s&&d.caption&&((s=m.create("caption")).innerHTML=Cf.ie?"":'<br data-mce-bogus="1"/>',f.insertBefore(s,f.firstChild)),""===d.align?Mu(a,f):Pu(a,f,d.align)}a.focus(),a.addVisual(),0<Tn(g)&&(n=!(o=ae(g,"caption"))||1<Tn(g),Kl(a,f,{structure:o,style:n}))})}function Xu(u,r,t,i,e){function c(n){return q(n,d)}function l(e){return function(n){u.selection.setRng(n.rng),u.focus(),t.clear(e),el(e),Kl(u,e.dom,n.effect)}}function o(r){return Tf(u).each(function(t){c(t).each(function(n){var e=il(i,n,t);r(n,e).each(l(n))})})}function a(){return Tf(u).map(function(r){return c(r).bind(function(n){var e=il(i,n,r),t=Xc(I,j.fromDom(u.getDoc()),B.none());return mf(n,e,t)})})}function f(){return Tf(u).map(function(t){return c(t).bind(function(n){var e=il(i,n,t);return sf(n,e)})})}function s(o,n){return n().each(function(n){var r=P(n,oc);Tf(u).each(function(n){return c(n).each(function(n){var e=Yc(j.fromDom(u.getDoc())),t=(t=r,e=e,{selection:ol(i),clipboard:t,generators:e});o(n,t).each(l(n))})})})}function m(e,n){n.each(function(n){Kl(e,n.dom,C)})}var d=nl(u);z({mceTableSplitCells:function(){return o(r.unmergeCells)},mceTableMergeCells:function(){return o(r.mergeCells)},mceTableInsertRowBefore:function(){return o(r.insertRowsBefore)},mceTableInsertRowAfter:function(){return o(r.insertRowsAfter)},mceTableInsertColBefore:function(){return o(r.insertColumnsBefore)},mceTableInsertColAfter:function(){return o(r.insertColumnsAfter)},mceTableDeleteCol:function(){return o(r.deleteColumn)},mceTableDeleteRow:function(){return o(r.deleteRow)},mceTableCutCol:function(n){return f().each(function(n){e.setColumns(n),o(r.deleteColumn)})},mceTableCutRow:function(n){return a().each(function(n){e.setRows(n),o(r.deleteRow)})},mceTableCopyCol:function(n){return f().each(function(n){return e.setColumns(n)})},mceTableCopyRow:function(n){return a().each(function(n){return e.setRows(n)})},mceTablePasteColBefore:function(n){return s(r.pasteColsBefore,e.getColumns)},mceTablePasteColAfter:function(n){return s(r.pasteColsAfter,e.getColumns)},mceTablePasteRowBefore:function(n){return s(r.pasteRowsBefore,e.getRows)},mceTablePasteRowAfter:function(n){return s(r.pasteRowsAfter,e.getRows)},mceTableDelete:function(){return Sf(u).each(function(n){q(n,d).filter(Q(d)).each(function(n){var e=j.fromText("");zt(n,e),qt(n),u.dom.isEmpty(u.getBody())?(u.setContent(""),u.selection.setCursorLocation()):((n=u.dom.createRng()).setStart(e.dom,0),n.setEnd(e.dom,0),u.selection.setRng(n),u.nodeChanged())})})},mceTableSizingMode:function(n,e){return t=e,Sf(u).each(function(n){ea(u)||na(u)||Zl(u)||q(n,d).each(function(n){"relative"!==t||xl(n)?"fixed"!==t||Sl(n)?"responsive"!==t||Tl(n)||aa(n):la(u,n):ca(u,n),el(n),Kl(u,n.dom,C)})});var t}},function(n,e){return u.addCommand(e,n)}),z({mceTableCellType:function(n,e){var t=q($(u),d);r.setTableCellType(u,e),m(u,t)},mceTableRowType:function(n,e){var t=q($(u),d);r.setTableRowType(u,e),m(u,t)}},function(n,e){return u.addCommand(e,n)}),u.addCommand("mceTableColType",function(n,e){return le(e,"type").each(function(n){return o("th"===n?r.makeColumnsHeader:r.unmakeColumnsHeader)})}),z({mceTableProps:D(xf,u,!1),mceTableRowProps:D(yf,u),mceTableCellProps:D(vf,u,i)},function(n,e){return u.addCommand(e,function(){return n()})}),u.addCommand("mceInsertTable",function(n,e){p(e)&&0<oe(e).length?lf(u,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):xf(u,!0)}),u.addCommand("mceTableApplyCellStyle",function(n,e){function r(n){return"tablecell"+n.toLowerCase().replace("-","")}var o;!p(e)||0===(o=of($(u),i,d)).length||function(n){for(var e in n)if(ue.call(n,e))return;return 1}(e=ie(e,function(n,e){return u.formatter.has(r(e))&&x(n)}))||(z(e,function(e,t){M(o,function(n){bf.normal(u,n.dom).setFormat(r(t),e)})}),c(o[0]).each(function(n){return Kl(u,n.dom,$l)}))})}function Yu(n,e,t,r){return{start:n,soffset:e,finish:t,foffset:r}}function Ju(n,e,t){var r,o=n=n.document.createRange();return e.fold(function(n){o.setStartBefore(n.dom)},function(n,e){o.setStart(n.dom,e)},function(n){o.setStartAfter(n.dom)}),r=n,t.fold(function(n){r.setEndBefore(n.dom)},function(n,e){r.setEnd(n.dom,e)},function(n){r.setEndAfter(n.dom)}),n}function Qu(n,e,t,r,o){return(n=n.document.createRange()).setStart(e.dom,t),n.setEnd(r.dom,o),n}function Zu(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function ni(n,e,t){return e(j.fromDom(t.startContainer),t.startOffset,j.fromDom(t.endContainer),t.endOffset)}function ei(n,e){o=n;var o,t,n=e.match({domRange:function(n){return{ltr:m(n),rtl:B.none}},relative:function(n,e){return{ltr:Nn(function(){return Ju(o,n,e)}),rtl:Nn(function(){return B.some(Ju(o,e,n))})}},exact:function(n,e,t,r){return{ltr:Nn(function(){return Qu(o,n,e,t,r)}),rtl:Nn(function(){return B.some(Qu(o,t,r,n,e))})}}});return(t=(e=n).ltr()).collapsed?e.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return Bf.rtl(j.fromDom(n.endContainer),n.endOffset,j.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return ni(0,Bf.ltr,t)}):ni(0,Bf.ltr,t)}function ti(n,e,t){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}function ri(t,r,n,e,o){function l(n){var e=t.dom.createRange();return e.setStart(r.dom,n),e.collapse(!0),e}var u=it(r).length,n=function(n,e,t,r){if(0!==r){if(n===t)return r-1;for(var o=t,u=1;u<r;u++){var i=l(u).getBoundingClientRect(),c=Math.abs(n-i.left);if(e<=i.bottom){if(e<i.top||o<c)return u-1;o=c}}}return 0}(n,e,o.right,u);return l(n)}function oi(n,e){var t=_(n);return"input"===t?f.after(n):E(["br","img"],t)?0===e?f.before(n):f.after(n):f.on(n,e)}function ui(n,e){return n=n.fold(f.before,oi,f.after),e=e.fold(f.before,oi,f.after),If.relative(n,e)}function ii(n,e,t,r){return n=oi(n,e),e=oi(t,r),If.relative(n,e)}function ci(n){return B.from(n.getSelection())}function li(n,e){ci(n).each(function(n){n.removeAllRanges(),n.addRange(e)})}function ai(n,e,t,r,o){e=Qu(n,e,t,r,o),li(n,e)}function fi(l,n){ei(l,n).match({ltr:function(n,e,t,r){ai(l,n,e,t,r)},rtl:function(o,u,i,c){ci(l).each(function(n){if(n.setBaseAndExtent)n.setBaseAndExtent(o.dom,u,i.dom,c);else if(n.extend)try{t=i,r=c,(e=n).collapse(o.dom,u),e.extend(t.dom,r)}catch(n){ai(l,i,c,o,u)}else ai(l,i,c,o,u);var e,t,r})}})}function si(n,e,t,r,o){e=ii(e,t,r,o),fi(n,e)}function mi(n,e,t){e=ui(e,t),fi(n,e)}function di(n){function e(n,e,t,r){return Qu(o,n,e,t,r)}var o=If.getWin(n).dom,n=n.match({domRange:function(n){var e=j.fromDom(n.startContainer),t=j.fromDom(n.endContainer);return ii(e,n.startOffset,t,n.endOffset)},relative:ui,exact:ii});return ei(o,n).match({ltr:e,rtl:e})}function gi(n){var e;return 0<n.rangeCount?(e=n.getRangeAt(0),n=n.getRangeAt(n.rangeCount-1),B.some(Yu(j.fromDom(e.startContainer),e.startOffset,j.fromDom(n.endContainer),n.endOffset))):B.none()}function pi(n){var e,t,r,o,u,i,c,l,a,f,s;return null!==n.anchorNode&&null!==n.focusNode&&(e=j.fromDom(n.anchorNode),t=j.fromDom(n.focusNode),r=e,o=n.anchorOffset,u=t,i=n.focusOffset,s=o,c=u,l=i,(a=ye(f=r).dom.createRange()).setStart(f.dom,s),a.setEnd(c.dom,l),f=a,s=L(r,u)&&o===i,f.collapsed)&&!s?B.some(Yu(e,n.anchorOffset,t,n.focusOffset)):gi(n)}function hi(n){return ci(n).filter(function(n){return 0<n.rangeCount}).bind(pi).map(function(n){return If.exact(n.start,n.soffset,n.finish,n.foffset)})}function bi(n,e){return e=If.exact(e,0,e,0),di(e)}function vi(n,e){return{selection:n,kill:e}}function wi(n,e,t,r){return{start:f.on(n,e),finish:f.on(t,r)}}function yi(n,e){return n=Ef(n,e),Yu(j.fromDom(n.startContainer),n.startOffset,j.fromDom(n.endContainer),n.endOffset)}function Ci(t,n,r,e,o){return L(r,e)?B.none():Qi(r,e,n).bind(function(n){var e=n.boxes.getOr([]);return 0<e.length?(o(t,e,n.start,n.finish),B.some(vi(B.some(_f(r,0,r,Hc(r))),!0))):B.none()})}function xi(n,e,t,r){return void 0===r&&(r=Hf),n.property().parent(e).map(function(n){return Ff(n,r)})}function Si(e,t,r,o,n){return un(n=void 0===n?Vf:n,function(n){return n.current===r}).bind(function(n){return n.current(e,t,o,n.next).orThunk(function(){return n.fallback.bind(function(n){return Si(e,t,n,o)})})})}function Ti(e){return function(n){return 0===e.property().children(n).length}}function Ri(n,e,t,r){return $f(n,e,t,Hf,Uf(),r)}function Di(n,e,t,r){return $f(n,e,t,Hf,Kf(),r)}function Oi(n,e){return Ri(Gf,n,Ti(Gf),e)}function Ai(n,e){return Di(Gf,n,Ti(Gf),e)}function ki(n){return h(n,"tr")}function Ii(n){return"br"===_(n)}function Bi(n,e,t){return e(n,t).bind(function(n){return he(n)&&0===it(n).trim().length?Bi(n,e,t):B.some(n)})}function Ei(e,n,t,r){return Se(o=n,u=t).filter(Ii).orThunk(function(){return Se(o,u-1).filter(Ii)}).bind(function(n){return r.traverse(n).fold(function(){return Bi(n,r.gather,e).map(r.relative)},function(n){return Ce(r=n).bind(function(e){var t=F(e);return R(t,D(L,r)).map(function(n){return{parent:e,children:t,element:r,index:n}})}).map(function(n){return f.on(n.parent,n.index)});var r})});var o,u}function Pi(n,e){return{left:n.left,top:n.top+e,right:n.right,bottom:n.bottom+e}}function Mi(n,e){return{left:n.left,top:n.top-e,right:n.right,bottom:n.bottom-e}}function Ni(n,e,t){return{left:n.left+e,top:n.top+t,right:n.right+e,bottom:n.bottom+t}}function Wi(e,n,t){return Ie(function(n,e){return e(n)},st,n,cu,void 0).fold(l,function(n){return ns(e,n).exists(function(n){return(e=t).left<(n=n).left||Math.abs(n.right-e.left)<1||e.left>n.right;var e})})}function ji(e,t,n){var r,o=e.move(n,5),u=ts(t,e,n,o,100).getOr(o),n=u,o=t;return((r=e).point(n)>o.getInnerHeight()?B.some(r.point(n)-o.getInnerHeight()):r.point(n)<0?B.some(-r.point(n)):B.none()).fold(function(){return t.situsFromPoint(u.left,e.point(u))},function(n){return t.scrollBy(0,n),t.situsFromPoint(u.left,e.point(u)-n)})}function Li(l,a,f){return l.getSelection().bind(function(e){return n=a,t=e.finish,r=e.foffset,o=f,(Ii(t)?(u=n,(c=o).traverse(i=t).orThunk(function(){return Bi(i,c.gather,u)}).map(c.relative)):Ei(n,t,r,o)).map(function(n){return{start:n,finish:n}}).fold(function(){return B.some(Oo(e.finish,e.foffset))},function(n){n=l.fromSitus(n),n=Yf.verify(l,e.finish,e.foffset,n.finish,n.foffset,f.failure,a);return Yf.cata(n,function(n){return B.none()},function(){return B.none()},function(n){return B.some(Oo(n,0))},function(n){return B.some(Oo(n,Hc(n)))})});var n,t,r,o,u,i,c})}function zi(t,r,o,u,i,c){return 0===c?B.none():(l=i,Zf(e=t,o,u).bind(function(n){return os(e,l,n)}).bind(function(n){var e=t.fromSitus(n),e=Yf.verify(t,o,u,e.finish,e.foffset,i.failure,r);return Yf.cata(e,function(){return B.none()},function(){return B.some(n)},function(n){return L(o,n)&&0===u?_i(t,o,u,Mi,i):zi(t,r,n,0,i,c-1)},function(n){return L(o,n)&&u===Hc(n)?_i(t,o,u,Pi,i):zi(t,r,n,Hc(n),i,c-1)})}));var e,l}function _i(e,n,t,r,o){return Zf(e,n,t).bind(function(n){return os(e,o,r(n,rs.getJumpSize()))})}function Fi(i,c,l,n,a){return h(n,"td,th",c).bind(function(u){return h(u,"table",c).bind(function(n){return e=n,st(a,function(n){return Ce(n).exists(function(n){return L(n,e)})},void 0).isSome()?Li(t=i,r=c,o=l).bind(function(n){return zi(t,r,n.element,n.offset,o,20).map(t.fromSitus)}).bind(function(e){return h(e.finish,"td,th",c).map(function(n){return{start:u,finish:n,range:e}})}):B.none();var e,t,r,o})})}function Hi(n,e,t,r,o,u){return ne().browser.isIE()?B.none():u(r,e).orThunk(function(){return Fi(n,e,t,r,o).map(function(n){n=n.range;return vi(B.some(_f(n.start,n.soffset,n.finish,n.foffset)),!0)})})}function qi(n,r){return h(n,"tr",r).bind(function(t){return h(t,"table",r).bind(function(n){var e=Pn(n,"tr");return L(t,e[0])?Ri(Gf,n,function(n){return Kc(n).isSome()},r).map(function(n){var e=Hc(n);return vi(B.some(_f(n,e,n,e)),!0)}):B.none()})})}function Vi(n,r){return h(n,"tr",r).bind(function(t){return h(t,"table",r).bind(function(n){var e=Pn(n,"tr");return L(t,e[e.length-1])?Di(Gf,n,function(n){return Uc(n).isSome()},r).map(function(n){return vi(B.some(_f(n,0,n,0)),!0)}):B.none()})})}function Ui(n,e,t,r,o,u,i){return Fi(n,t,r,o,u).bind(function(n){return Ci(e,t,n.start,n.finish,i)})}function Ki(n,e){return h(n,"td,th",e)}function $i(e){return function(n){return n===e}}function Gi(n,e){return{rows:n,cols:e}}var Xi=function(o,u,n,e){n=u(o,n);return on(e,function(n,e){var t,r,e=u(o,e);return t=o,r=e,n.bind(function(n){return r.filter(D(t.eq,n))})},n)},Yi=Kt(),Ji=function(t,n){return e=Yi,r=function(n,e){return t(e)},0<(n=n).length?Xi(e,r,n[0],n.slice(1)):B.none();var e,r},Qi=function(i,c,l){function a(e){return function(n){return void 0!==l&&l(n)||L(n,e)}}return L(i,c)?B.some({boxes:B.some([i]),start:i,finish:c}):Gt(i).bind(function(u){return Gt(c).bind(function(r){var n,e,t,o;return L(u,r)?B.some({boxes:(e=i,t=c,o=jt(u),nt(o,e,t)),start:i,finish:c}):xn(u,r)?(o=0<(n=En(c,"td,th",a(u))).length?n[n.length-1]:c,B.some({boxes:tt(u,i,u,c,r),start:i,finish:o})):xn(r,u)?(e=0<(n=En(i,"td,th",a(r))).length?n[n.length-1]:i,B.some({boxes:tt(r,i,u,c,r),start:i,finish:e})):$t(Yi,i,c,void 0).shared.bind(function(n){return h(n,"table",l).bind(function(n){var e=En(c,"td,th",a(n)),e=0<e.length?e[e.length-1]:c,t=En(i,"td,th",a(n)),t=0<t.length?t[t.length-1]:i;return B.some({boxes:tt(n,i,u,c,r),start:t,finish:e})})})})})},Zi=Xt,n=Zt([{none:[]},{multiple:["elements"]},{single:["element"]}]),nc=function(n,e,t,r){return n.fold(e,t,r)},ec=n.none,tc=n.multiple,rc=n.single,Hn=tinymce.util.Tools.resolve("tinymce.PluginManager"),oc=function(n){return nr(n,!0)},uc=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e},ic=function(n,e){return n?B.some(e):B.none()},cc=tr("width",function(n){return n.dom.offsetWidth}),lc=function(n){return cc.get(n)},ac=function(n){return cc.getOuter(n)},fc=function(t,r){void 0===r&&(r=O);var n=t.grid,e=rn(n.columns,a),o=rn(n.rows,a);return P(e,function(e){return rr(function(){return w(o,function(n){return U.getAt(t,n,e).filter(function(n){return n.column===e}).toArray()})},function(n){return 1===n.colspan&&r(n.element)},function(){return U.getAt(t,0,e)})})},sc=function(t){var n=t.grid,e=rn(n.rows,a),r=rn(n.columns,a);return P(e,function(e){return rr(function(){return w(r,function(n){return U.getAt(t,e,n).filter(function(n){return n.row===e}).fold(m([]),function(n){return[n]})})},function(n){return 1===n.rowspan},function(){return U.getAt(t,e,0)})})},mc=function(e,t){return function(n){return"rtl"==("rtl"===vt(n,"direction")?"rtl":"ltr")?t:e}},dc=tr("height",function(n){var e=n.dom;return De(n)?e.getBoundingClientRect().height:e.offsetHeight}),gc=ir,pc=function(n,e){return void 0!==n?n:void 0!==e?e:0},hc=function(n){var e,t,r=n.dom.ownerDocument,o=r.body,u=r.defaultView,r=r.documentElement;return o===n.dom?gc(o.offsetLeft,o.offsetTop):(e=pc(null==u?void 0:u.pageYOffset,r.scrollTop),u=pc(null==u?void 0:u.pageXOffset,r.scrollLeft),t=pc(r.clientTop,o.clientTop),r=pc(r.clientLeft,o.clientLeft),bc(n).translate(u-r,e-t))},bc=function(n){var e=n.dom,t=e.ownerDocument.body;return t===e?gc(t.offsetLeft,t.offsetTop):De(n)?(t=e.getBoundingClientRect(),gc(t.left,t.top)):gc(0,0)},vc={delta:a,positions:function(n){return hr(gr,pr,n)},edge:dr},wc=mc({delta:a,edge:fr,positions:function(n){return hr(sr,mr,n)}},{delta:function(n){return-n},edge:ar,positions:function(n){return hr(mr,sr,n)}}),yc={delta:function(n,e){return wc(e).delta(n,e)},positions:function(n,e){return wc(e).positions(n,e)},edge:function(n){return wc(n).edge(n)}},Cc={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},xc=(Fn="[eE][+-]?[0-9]+",n=["Infinity",(n="[0-9]+")+"\\."+(cl=function(n){return"(?:"+n+")?"})(n)+cl(Fn),"\\."+n+cl(Fn),n+cl(Fn)].join("|"),new RegExp("^([+-]?(?:"+n+"))(.*)$")),Sc=function(n){return br()?(t=(e=n).dom.getBoundingClientRect().width,"border-box"===vt(e,"box-sizing")?t:t-vr(e,"padding-left",0)-vr(e,"padding-right",0)-(vr(e,"border-left-width",0)+vr(e,"border-right-width",0))):vr(n,"width",lc(n));var e,t},Tc=/(\d+(\.\d+)?)%/,Rc=/(\d+(\.\d+)?)px|em/,Dc=function(n){return We(n,"width").fold(function(){return B.from(Pe(n,"width"))},function(n){return B.some(n)})},Oc=function(n,e){return n/e.pixelWidth()*100},Ac=function(o,u){return Dc(o).fold(function(){return Sc(o)},function(n){return e=o,n=n,t=u,null!==(r=Rc.exec(n))?parseInt(r[1],10):null===(r=Tc.exec(n))?Sc(e):parseFloat(r[1])/100*t.pixelWidth();var e,t,r})},kc=m(Tc),Ic=m(Rc),Bc=we("col"),Ec=function(n,e){return We(n,e).isSome()},Pc=function(n,o,u,e,t,i){return n.filter(e).fold(function(){return i((e=u,(t=o)<0||t>=e.length-1?B.none():(n=e[t].fold(function(){var n=e.slice(0,t);return(n=nn.call(n,0)).reverse(),J(n,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return B.some({value:n,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return J(n,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return B.some({value:n,delta:1})}),n.bind(function(t){return r.map(function(n){var e=n.delta+t.delta;return Math.abs(n.value-t.value)/e})}))));var e,t,n,r},function(n){return t(n)})},Mc=function(n,e,r,o,u){var i=fc(n,function(n){return Ec(n,"width")}),n=U.hasColumns(n)?P(U.justColumns(n),function(n){return B.from(n.element)}):i,c=[B.some(yc.edge(e))].concat(P(yc.positions(i,e),function(n){return n.map(function(n){return n.x})})),l=Q(Ct);return P(n,function(n,t){return Pc(n,t,c,l,function(n){var e;return!Bc(e=n)||Ec(e,"width")?r(n,u):(n=null!=(e=i[t])?a(e):B.none(),Pc(n,t,c,l,function(n){return o(B.some(lc(n)))},o))},o)})},Nc=function(n){var e=n;return{get:function(){return e},set:function(n){e=n}}},Wc=function(t){function n(){return lc(t)}var e=m(0);return{width:n,pixelWidth:n,getWidths:function(n,e){return Br(n,t,e)},getCellDelta:e,singleColumnWidth:m([0]),minCellWidth:e,setElementWidth:I,adjustTableWidth:I,isRelative:!0,label:"none"}},jc=function(n,r){var t=Nc(parseFloat(n)),o=Nc(lc(r));return{width:t.get,pixelWidth:o.get,getWidths:function(n,e){return Mc(n,r,Sr,function(n){return n.fold(function(){return t.minCellWidth()},function(n){return n/t.pixelWidth()*100})},t=e);var t},getCellDelta:function(n){return n/o.get()*100},singleColumnWidth:function(n,e){return[100-n]},minCellWidth:function(){return xt()/o.get()*100},setElementWidth:yr,adjustTableWidth:function(n){var e=t.get(),n=e+n/100*e;yr(r,n),t.set(n),o.set(lc(r))},isRelative:!0,label:"percent"}},Lc=function(n,t){var e=Nc(n),r=e.get;return{width:r,pixelWidth:r,getWidths:function(n,e){return Br(n,t,e)},getCellDelta:a,singleColumnWidth:function(n,e){return[Math.max(xt(),n+e)-n]},minCellWidth:xt,setElementWidth:wr,adjustTableWidth:function(n){n=r()+n;wr(t,n),e.set(n)},isRelative:!1,label:"pixel"}},zc=Lc,_c=jc,Fc=function(n,e){for(var o,u,i,c,l,a,f,t,r,s,m=function(n){return ee(n.element,e)},d=oc(n),g=Ue(d),p=Pr(n),h=U.generate(g),b=(o=m,b=h.grid.columns,u=h.grid.rows,i=b,l=c=0,a=[],f=[],z(h.access,function(n){var e,t,r;a.push(n),o(n)&&(f.push(n),t=(e=n.row)+n.rowspan-1,n=(r=n.column)+n.colspan-1,e<u?u=e:c<t&&(c=t),r<i?i=r:l<n&&(l=n))}),{minRow:u,minCol:i,maxRow:c,maxCol:l,allCells:a,selectedCells:f}),v="th:not("+e+"),td:not("+e+")",w=Rt(d,"th,td",function(n){return ee(n,v)}),y=(M(w,qt),g),C=h,x=b,S=m,T=C.grid.columns,R=C.grid.rows,D=0;D<R;D++)for(var O=!1,A=0;A<T;A++)D<x.minRow||D>x.maxRow||A<x.minCol||A>x.maxCol||(U.getAt(C,D,A).filter(S).isNone()?(t=O,r=y[D].element,s=j.fromTag("td"),K(s,j.fromTag("br")),(t?K:_t)(r,s)):O=!0);var w=d,k=b,g=h,b=(m=n,h=U.fromTable(n),n=p,0===(p=b).minCol&&h.grid.columns===p.maxCol+1?0:(h=Br(h,m,n),m=W(h,function(n,e){return n+e},0),h=W(h.slice(p.minCol,p.maxCol+1),function(n,e){return n+e},0)/m*n.pixelWidth()-n.pixelWidth(),n.getCellDelta(h)));return z(g.columns,function(n){(n.column<k.minCol||n.column>k.maxCol)&&qt(n.element)}),g=N(Tt(w,"tr"),function(n){return 0===n.dom.childElementCount}),M(g,qt),k.minCol!==k.maxCol&&k.minRow!==k.maxRow||M(Tt(w,"th,td"),function(n){H(n,"rowspan"),H(n,"colspan")}),H(w,Nt),H(w,"data-snooker-col-series"),Pr(w).adjustTableWidth(b),d},Hc=function(n){return"img"===_(n)?1:ct(n).fold(function(){return F(n).length},function(n){return n.length})},qc=["img","br"],Vc=function(n){return ct(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("")}).isSome()||E(qc,_(n))},Uc=function(n){return r=Vc,(o=function(n){for(var e=0;e<n.childNodes.length;e++){var t=j.fromDom(n.childNodes[e]);if(r(t))return B.some(t);t=o(n.childNodes[e]);if(t.isSome())return t}return B.none()})(n.dom);var r,o},Kc=function(n){return $c(n,Vc)},$c=function(n,o){function u(n){for(var e=F(n),t=e.length-1;0<=t;t--){var r=e[t];if(o(r))return B.some(r);r=u(r);if(r.isSome())return r}return B.none()}return u(n)},Gc={scope:["row","col"]},Xc=function(l,n,a){function f(n,e){var t=n.element.dom,r=e.dom;ht(t)&&ht(r)&&(r.style.cssText=t.style.cssText),je(e,"height"),1!==n.colspan&&je(e,"width")}return{col:function(n){var e=ye(n.element),e=j.fromTag(_(n.element),e.dom);return f(n,e),l(n.element,e),e},colgroup:Wr,row:zr(n),cell:function(n){var t,r,o,u,i,e=ye(n.element),e=j.fromTag(_(n.element),e.dom),c=a.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=0<c.length?(t=n.element,r=e,o=c,Uc(t).map(function(n){var e=o.join(","),n=En(n,e,function(n){return L(n,t)});return on(n,function(n,e){e=er(e);return H(e,"contenteditable"),K(n,e),e},r)}).getOr(r)):e;return K(c,j.fromTag("br")),f(n,e),u=n.element,i=e,z(Gc,function(e,t){return pt(u,t).filter(function(n){return E(e,n)}).each(function(n){return b(i,t,n)})}),l(n.element,e),e},replace:jr,gap:Mr}},Yc=function(n){return{col:Nr,colgroup:Wr,row:zr(n),cell:Mr,replace:Lr,gap:Mr}},Jc=function(n){return j.fromDom(n.getBody())},Qc=function(n){return n.getBoundingClientRect().width},Zc=function(n){return n.getBoundingClientRect().height},nl=function(e){return function(n){return L(n,Jc(e))}},el=function(n){H(n,"data-mce-style");function e(n){return H(n,"data-mce-style")}M(Ot(n),e),M(At(n),e)},tl=function(n,e){n=n.dom.getStyle(e,"width")||n.dom.getAttrib(e,"width");return B.from(n).filter(pn)},rl=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},$=function(n){return j.fromDom(n.selection.getStart())},ol=function(n){return nc(n.get(),m([]),a,G)},ul={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},il=function(n,e,t){return{element:t,mergable:(o=e,u=ul,nc(n.get(),B.none,function(e){return e.length<=1?B.none():Qt(o,u.firstSelectedSelector,u.lastSelectedSelector).map(function(n){return{bounds:n,cells:e}})},B.none)),unmergable:(r=function(n,e){return pt(n,e).exists(function(n){return 1<parseInt(n,10)})},0<(t=ol(n)).length&&ln(t,function(n){return r(n,"rowspan")||r(n,"colspan")})?B.some(t):B.none()),selection:ol(n)};var r,o,u},cl=Zt([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),ll=A({},cl),al=function(n,e){return U.hasColumns(n)?(r=e,o=U.justColumns(n),P(o,function(n,e){return{element:n.element,width:r[e],colspan:n.colspan}})):(t=e,o=U.justCells(n),P(o,function(n){var e=qr(n.column,n.column+n.colspan,t);return{element:n.element,width:e,colspan:n.colspan}}));var t,r,o},fl=function(n,e,t,r,o){var u,i,c,l,n=U.fromTable(n),e=o.getCellDelta(e),a=o.getWidths(n,o),f=t===n.grid.columns-1,e=r.clampTableDelta(a,t,e,o.minCellWidth(),f),s=(t=t,u=e,i=o,c=r,l=(s=a).slice(0),t=t,s=0===(s=s).length?ll.none():1===s.length?ll.only(0):0===t?ll.left(0,1):t===s.length-1?ll.right(t-1,t):0<t&&t<s.length-1?ll.middle(t-1,t,t+1):ll.none(),t=m(P(l,m(0))),s.fold(t,function(n){return i.singleColumnWidth(l[n],u)},function(n,e){return c.calcLeftEdgeDeltas(l,n,e,u,i.minCellWidth(),i.isRelative)},function(n,e,t){return c.calcMiddleDeltas(l,n,e,t,u,i.minCellWidth(),i.isRelative)},function(n,e){return c.calcRightEdgeDeltas(l,n,e,u,i.minCellWidth(),i.isRelative)})),t=P(s,function(n,e){return n+a[e]});Vr(n,t,o),r.resizeTable(o.adjustTableWidth,e,f)},sl=function(n){return P(n,m(0))},ml=function(n,e,t,r,o){return o(n.slice(0,e)).concat(r).concat(o(n.slice(t)))},dl=Ur(function(n){return n<0}),gl=Ur(O),pl=function(){function i(n,t,e,r){var o=(100+e)/100,u=Math.max(r,(n[t]+e)/o);return P(n,function(n,e){return(e===t?u:n/o)-n})}function c(n,e,t,r,o,u){return u?i(n,e,r,o):(u=t,e=dl(t=n,n=e,r,o),ml(t,n,u+1,[e,0],sl))}return{resizeTable:function(n,e){return n(e)},clampTableDelta:dl,calcLeftEdgeDeltas:c,calcMiddleDeltas:function(n,e,t,r,o,u,i){return c(n,t,r,o,u,i)},calcRightEdgeDeltas:function(n,e,t,r,o,u){return u?i(n,t,r,o):(u=dl(n,t,r,o),sl(n.slice(0,t)).concat([u]))},calcRedestributedWidths:function(n,e,t,r){var o;return r?(o=(e+t)/e,r=P(n,function(n){return n/o}),{delta:100*o-100,newSizes:r}):{delta:t,newSizes:n}}}},hl=function(){function i(n,e,t,r,o){return r=gl(n,0<=r?t:e,r,o),ml(n,e,t+1,[r,-r],sl)}return{resizeTable:function(n,e,t){t&&n(e)},clampTableDelta:function(n,e,t,r,o){return o?0<=t?t:(o=W(n,function(n,e){return n+e-r},0),Math.max(-o,t)):dl(n,e,t,r)},calcLeftEdgeDeltas:i,calcMiddleDeltas:function(n,e,t,r,o,u){return i(n,t,r,o,u)},calcRightEdgeDeltas:function(n,e,t,r,o,u){return u?sl(n):(u=r/n.length,P(n,m(u)))},calcRedestributedWidths:function(n,e,t,r){return{delta:0,newSizes:n}}}},bl=function(n,e){var t=B.from(n.dom.documentElement).map(j.fromDom).getOr(n);return{parent:m(t),view:m(n),origin:m(gc(0,0)),isResizable:e}},vl=function(n,e,t){return{parent:m(e),view:m(n),origin:m(gc(0,0)),isResizable:t}},wl=Zt([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),yl=A(A({},wl),{from:function(n){return zn(n,"%")?Kr("%",wl.percent,n):zn(n,"px")?Kr("px",wl.pixels,n):wl.invalid(n)}}),Cl=yl.from,xl=function(n){return Dc(n).exists(function(n){return Tc.test(n)})},Sl=function(n){return Dc(n).exists(function(n){return Rc.test(n)})},Tl=function(n){return Dc(n).isNone()},Rl=Dr,Dl=function(n){return U.fromTable(n).grid},Ol=function(n){return n.slice(0).sort()},Fn=eo(["compare","extract","mutate","sink"]),Al=eo(["element","start","stop","destroy"]),kl=eo(["forceDrop","drop","move","delayDrop"]),Il=function(n){function e(){return n.stopPropagation()}function t(){return n.preventDefault()}var r,o,u=j.fromDom(function(n){if(Te()&&i(n.target)){var e=j.fromDom(n.target);if(pe(e)&&i(e.dom.shadowRoot)&&n.composed&&n.composedPath){e=n.composedPath();if(e)return X(e)}}return B.from(n.target)}(n).getOr(n.target));r=t,o=e;return{target:u,x:n.clientX,y:n.clientY,stop:e,prevent:t,kill:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r(o.apply(null,n))},raw:n}},Bl=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},El=O,Pl=Il,Ml=function(n,e){n=Pe(n,e);return void 0===n||""===n?[]:n.split(" ")},Nl=ao("ephox-dragster").resolve,Wl=Fn({compare:function(n,e){return gc(e.left-n.left,e.top-n.top)},extract:function(n){return B.some(gc(n.x,n.y))},sink:function(n,e){e=e,e=A({layerClass:Nl("blocker")},e),t=j.fromTag("div"),b(t,"role","presentation"),Ne(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),co(t,Nl("blocker")),co(t,e.layerClass);var t,r={element:function(){return t},destroy:function(){qt(t)}},o=uo(r.element(),"mousedown",n.forceDrop),u=uo(r.element(),"mouseup",n.drop),i=uo(r.element(),"mousemove",n.move),c=uo(r.element(),"mouseout",n.delayDrop);return Al({element:r.element,start:function(n){K(n,r.element())},stop:function(){qt(r.element())},destroy:function(){r.destroy(),u.unbind(),i.unbind(),c.unbind(),o.unbind()}})},mutate:function(n,e){n.mutate(e.left,e.top)}}),n=ao("ephox-snooker").resolve,jl=n("resizer-bar"),Ll=n("resizer-rows"),zl=n("resizer-cols"),_l=function(n){n=Pn(n.parent(),"."+jl);M(n,qt)},Fl=function(n,e,t,r,o){var u,i,c,l=hc(t),a=e.isResizable,r=0<r.length?vc.positions(r,t):[],f=0<r.length?(u=a,w(n.all,function(n,e){return u(n.element)?[e]:[]})):[],r=N(r,function(n,e){return v(f,function(n){return e===n})});h=e,r=r,i=l,c=ac(t),so(h,r,function(n,e){t=e.row,o=i.left-n.left,e=e.y-n.top,n=c,r=j.fromTag("div"),Ne(r,{position:"absolute",left:o+"px",top:e-3.5+"px",height:"7px",width:n+"px"}),Ee(r,{"data-row":t,role:"presentation"});var t,r,o=r;return co(o,Ll),o});var s,m,d,g,p,h=0<o.length?yc.positions(o,t):[],b=0<h.length?(m=a,d=[],rn((s=n).grid.columns,function(n){U.getColumnAt(s,n).map(function(n){return n.element}).forall(m)&&d.push(n)}),N(d,function(e){var n=U.filterItems(s,function(n){return n.column===e});return ln(n,function(n){return m(n.element)})})):[],r=N(h,function(n,e){return v(b,function(n){return e===n})});o=e,a=r,g=l,p=ur(t),so(o,a,function(n,e){t=e.col,e=e.x-n.left,n=g.top-n.top,r=p,o=j.fromTag("div"),Ne(o,{position:"absolute",left:e-3.5+"px",top:n+"px",height:r+"px",width:"7px"}),Ee(o,{"data-column":t,role:"presentation"});var t,r,o,e=o;return co(e,zl),e})},Hl=n("resizer-bar-dragging"),ql=function(n,o,u){var a=vc,i=yc,n=bo(n),f=Qr({beforeResize:Jr(["table","type"]),afterResize:Jr(["table","type"]),startDrag:Jr([])});return n.events.adjustHeight.bind(function(n){var e,t,r,o,u,i,c=n.table,l=(f.trigger.beforeResize(c,"row"),a.delta(n.delta,c));e=c,t=l,r=n.row,l=a,n=U.fromTable(e),l=Er(n,e,l,Tr,function(n){return n.getOrThunk(St)}),l=P(l,function(n,e){return r===e?Math.max(t+n,St()):n}),o=l,i=U.justCells(n),i=P(i,function(n){var e=qr(n.row,n.row+n.rowspan,o);return{element:n.element,height:e,rowspan:n.rowspan}}),u=l,n=P(n.all,function(n,e){return{element:n.element,height:u[e]}}),M(n,function(n){Cr(n.element,n.height)}),M(i,function(n){Cr(n.element,n.height)}),n=on(l,function(n,e){return n+e},0),Cr(e,n),f.trigger.afterResize(c,"row")}),n.events.startAdjust.bind(function(n){f.trigger.startDrag()}),n.events.adjustWidth.bind(function(n){var e=n.table,t=(f.trigger.beforeResize(e,"col"),i.delta(n.delta,e)),r=u(e);fl(e,t,n.column,o,r),f.trigger.afterResize(e,"col")}),{on:n.on,off:n.off,hideBars:n.hideBars,showBars:n.showBars,destroy:n.destroy,events:f.registry}},Vl=function(n,e){return n.fire("newrow",{node:e})},Ul=function(n,e){return n.fire("newcell",{node:e})},Kl=function(n,e,t){n.fire("TableModified",A(A({},t),{table:e}))},$l={structure:!1,style:!0},C={structure:!0,style:!1},Gl={"border-collapse":"collapse",width:"100%"},Xl={border:"1"},Yl="preservetable",Jl=function(n){return n.getParam("table_sizing_mode","auto")},Ql=function(n){return n.getParam("table_responsive_width")},Zl=function(n){return"relative"===Jl(n)||!0===Ql(n)},na=function(n){return"fixed"===Jl(n)||!1===Ql(n)},ea=function(n){return"responsive"===Jl(n)},ta=function(n){var e=n.getParam("table_column_resizing",Yl,"string");return un(["preservetable","resizetable"],function(n){return n===e}).getOr(Yl)},ra=function(n){return"preservetable"===ta(n)},oa=function(n){return"resizetable"===ta(n)},ua=function(n){n=n.getParam("table_clone_elements");return x(n)?B.some(n.split(/[ ,]/)):Array.isArray(n)?B.some(n):B.none()},ia=function(n,e){var t;return Zl(n)?(t=tl(n,e.dom).filter(rl).getOrThunk(function(){return Rl(e)}),_c(t,e)):na(n)?zc(lc(e),e):Pr(e)},ca=function(n,e){var n=ia(n,e),t=Dr(e=e);Yr(e,B.some(t),B.none(),n),Ro(e)},la=function(n,e){var t,n=ia(n,e);n=n,t=lc(e=e)+"px",Yr(e,B.some(t),B.none(),n),Ro(e)},aa=function(n){je(n,"width");var e=At(n),e=0<e.length?e:Ot(n);M(e,function(n){je(n,"width"),Ro(n)}),Ro(n)},fa=function(){var n=j.fromTag("div");return Ne(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),K(Oe(j.fromDom(document)),n),n},sa="bar-",ma=function(n){return"false"!==Pe(n,"data-mce-resize")},da=function(e,n,t){return e.property().isText(n)&&0===e.property().getText(n).trim().length||e.property().isComment(n)?t(n).bind(function(n){return da(e,n,t).orThunk(function(){return B.some(n)})}):B.none()},ga=ko,pa=Kt(),ha=function(t,r){1===Le(t,"colspan")&&Dc(t).bind(function(n){return r=["fixed","relative","empty"],B.from(xc.exec(n)).bind(function(n){var e=Number(n[1]),n=n[2],t=n;return v(r,function(n){return v(Cc[n],function(n){return t===n})})?B.some({value:e,unit:n}):B.none()});var r}).each(function(n){var e=n.value/2;Rr(t,e,n.unit),Rr(r,e,n.unit)})},ba=function(n,e,t,r){t===r?H(n,e):b(n,e,t)},va=function(n,e,t){Y(ke(n,e)).fold(function(){return _t(n,t)},function(n){return zt(n,t)})},wa=function(p,h){var b=P(p,function(n){return P(n.cells,l)});return P(p,function(n,g){return{details:w(n.cells,function(n,e){if(!1!==b[g][e])return[];r=e,o=h,i=(c=p)[t=g].cells.slice(r),i=Bo(i,o),u=r,r=P(c,function(n){return Pt(n,u)}).slice(t);for(var t,r,o,u,i,c={colspan:i,rowspan:Bo(r,o)},l=g,a=e,f=c.rowspan,s=c.colspan,m=l;m<l+f;m++)for(var d=a;d<a+s;d++)b[m][d]=!0;return[{element:n.element,rowspan:c.rowspan,colspan:c.colspan,isNew:n.isNew}]}),section:n.section}})},ya=function(n,t){return P(n,function(n){e=n.details;var e=J(e,function(n){return Ce(n.element).map(function(n){var e=Ce(n).isNone();return k(n,e,!1)})}).getOrThunk(function(){return k(t.row(),!0,!1)});return{element:e.element,cells:n.details,section:n.section,isNew:e.isNew}})},Ca=function(n,e){return J(n.all,function(n){return un(n.cells,function(n){return L(e,n.element)})})},xa=function(e,n,t){n=P(n.selection,function(n){return Dt(n).bind(function(n){return Ca(e,n)}).filter(t)}),n=uc(n);return ic(0<n.length,n)},Sa=function(n,e){return xa(n,e,O)},Ta=function(e,n){return n.mergable.filter(function(n){return Lo(e,n.cells)})},Ra=function(e,n){return n.unmergable.filter(function(n){return Lo(e,n)})},Da=function(n,e,t,r){for(var o=g(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<Mt(o[0]);c++){var l=o[i],a=Pt(l,c),f=t(a.element,e);!0===f&&!1===u?It(l,c,k(r(),!0,a.isLocked)):!0===f&&(u=!1)}return n},Oa=zo,Aa=_o,ka=function(t,n,r,o){return t.concat(rn(n,function(){var n=t[t.length-1],e=qo(n.cells.length,n,r,function(n){return ae(o,n.toString())});return Bt(n,e)}))},Ia=function(n,t,r,o){return P(n,function(n){var e=qo(t,n,r,l);return kt(n,o,e)})},Ba=function(n){return W(n,function(n,e){return v(n,function(n){return n.column===e.column})?n:n.concat([e])},[]).sort(function(n,e){return n.column-e.column})},Ea=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Pa=Kt(),Ma=function(n,e){e=N(n,e);return 0===e.length?B.some("td"):e.length===n.length?B.some("th"):B.none()},Na=function(n,e){return v(e,function(n){return 0===n.column&&n.isLocked})},Wa=function(e,n){return v(n,function(n){return n.column+n.colspan>=e.grid.columns&&n.isLocked})},ja=e(function(n,e,t,r){var o=e[0].row,u=pu(e),u=on(u,function(n,e){return{grid:Xo(n.grid,o,e.row+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid;return gu(u,o,e[0].column)},Sa,I,I,ou),La=e(function(n,e,t,r){var o=pu(e),u=o[o.length-1],i=u.row+u.rowspan,u=on(o,function(n,e){return Xo(n,i,e.row,t,r.getOrInit)},n);return gu(u,i,e[0].column)},Sa,I,I,ou),za=e(function(n,e,t,r){var e=e.details,o=Ba(e),u=o[0].column,o=on(o,function(n,e){return{grid:Yo(n.grid,u,e.column+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid;return gu(o,e[0].row,u)},yu(!0),vu,I,ou),_a=e(function(n,e,t,r){var e=e.details,o=e[e.length-1],u=o.column+o.colspan,o=Ba(e),o=on(o,function(n,e){return Yo(n,u,e.column,t,r.getOrInit)},n);return gu(o,e[0].row,u)},yu(!1),vu,I,ou),Fa=e(function(n,e,t,r){var o,e=Ba(e.details),n=(n=n,o=P(e,function(n){return n.column}),w(n,function(n){var e=n.cells,e=on(o,function(n,e){return 0<=e&&e<n.length?n.slice(0,e).concat(n.slice(e+1)):n},e);return 0<e.length?[de(e,n.section)]:[]})),e=mu(n,e[0].row,e[0].column);return su(n,e)},function(e,n){return jo(e,n).map(function(n){return{details:n,pixelDelta:-wu(e,n)}})},vu,fu,ou),Ha=e(function(n,e,t,r){var o,u=pu(e),n=(i=u[0].row,u=u[u.length-1].row,o=(n=g(n)).rows,n.cols.concat(o.slice(0,i)).concat(o.slice(u+1))),i=mu(n,e[0].row,e[0].column);return su(n,i)},Sa,I,fu,ou),qa=(e(function(n,e,t,r){n=nu(n,e.column,t,r.replaceOrInit);return gu(n,e.row,e.column)},Wo,I,I,uu("row","th")),e(function(n,e,t,r){var o=Ba(e),o=W(o,function(n,e){return nu(n,e.column,t,r.replaceOrInit)},n);return gu(o,e[0].row,e[0].column)},jo,I,I,uu("row","th"))),Va=(e(function(n,e,t,r){n=nu(n,e.column,t,r.replaceOrInit);return gu(n,e.row,e.column)},Wo,I,I,uu(null,"td")),e(function(n,e,t,r){var o=Ba(e),o=W(o,function(n,e){return nu(n,e.column,t,r.replaceOrInit)},n);return gu(o,e[0].row,e[0].column)},jo,I,I,uu(null,"td"))),Ua=(e(function(n,e,t,r){n=eu(n,e.row,t,r.replaceOrInit);return gu(n,e.row,e.column)},Mo,I,I,uu("col","th")),e(function(n,e,t,r){var o=pu(e),o=W(o,function(n,e){return eu(n,e.row,t,r.replaceOrInit)},n);return gu(o,e[0].row,e[0].column)},Sa,I,I,uu("col","th")),e(function(n,e,t,r){n=eu(n,e.row,t,r.replaceOrInit);return gu(n,e.row,e.column)},Mo,I,I,uu(null,"td")),e(function(n,e,t,r){var o=pu(e),o=W(o,function(n,e){return eu(n,e.row,t,r.replaceOrInit)},n);return gu(o,e[0].row,e[0].column)},Sa,I,I,uu(null,"td")),e(function(n,e,t,r){var o=e.cells,n=(au(o),function(n,e,t){var r=g(n).rows;if(0!==r.length)for(var o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++){var i=r[o],c=Pt(i,u).isLocked;It(i,u,k(t(),!1,c))}return n}(n,e.bounds,r.merge(o)));return su(n,B.from(o[0]))},Ta,bu,I,iu)),Ka=e(function(n,e,t,r){n=on(e,function(n,e){return Da(n,e,t,r.unmerge(e))},n);return su(n,B.from(e[0]))},Ra,bu,I,iu),$a=e(function(n,t,e,r){o=t.clipboard,u=t.generators,o=U.fromTable(o);var o=Eo(o,u,!0),u={row:t.row,column:t.column};return Ko(u,n,o,t.generators,e).fold(function(){return su(n,B.some(t.element))},function(n){var e=mu(n,t.row,t.column);return su(n,e)})},function(e,t){return Dt(t.element).bind(function(n){return Ca(e,n).map(function(n){return A(A({},n),{generators:t.generators,clipboard:t.clipboard})})})},bu,I,ou),Ga=e(function(n,e,t,r){var o=g(n).rows,u=e.cells[0].column,o=o[e.cells[0].row],o=hu(e.clipboard,e.generators,o),u=$o(u,n,o,e.generators,t),n=mu(u,e.cells[0].row,e.cells[0].column);return su(u,n)},Cu(!0),I,I,ou),Xa=e(function(n,e,t,r){var o=g(n).rows,u=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,o=o[e.cells[0].row],o=hu(e.clipboard,e.generators,o),u=$o(u,n,o,e.generators,t),n=mu(u,e.cells[0].row,e.cells[0].column);return su(u,n)},Cu(!1),I,I,ou),Ya=e(function(n,e,t,r){var o=g(n).rows,u=e.cells[0].row,o=o[u],o=hu(e.clipboard,e.generators,o),u=Go(u,n,o,e.generators,t),n=mu(u,e.cells[0].row,e.cells[0].column);return su(u,n)},No,I,I,ou),Ja=e(function(n,e,t,r){var o=g(n).rows,u=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,o=o[e.cells[0].row],o=hu(e.clipboard,e.generators,o),u=Go(u,n,o,e.generators,t),n=mu(u,e.cells[0].row,e.cells[0].column);return su(u,n)},No,I,I,ou),Qa=function(n,e){var o=U.fromTable(n);return Sa(o,e).bind(function(n){var e=n[n.length-1],t=n[0].column,r=e.column+e.colspan,n=cn(P(o.all,function(n){return N(n.cells,function(n){return n.column>=t&&n.column<r})}));return Ma(n,function(n){return"th"===_(n.element)})}).getOr("")},Za=function(n,e){return"thead"===(t=Su(0,e).fold(function(){return xu(e)},function(n){return"thead"}))?"header":"tfoot"===t?"footer":"body";var t},nf=function(e,n,t,r){return M(n,function(n){return Ru(e,n,t,r)})},ef=function(n,e,t){var r,o,u=n.dom;"header"===t?(o="auto"===(r=To(n))?(o=q(j.fromDom(e.cells[0])).map(Fe).getOr([]),J(o,function(n){return Su(0,n.dom)}).map(function(n){return n.thead&&n.ths?"sectionCells":n.thead?"section":"cells"}).getOr("section")):r,nf(n,e.cells,"section"===o?"td":"th","col"),Tu(u,e,"cells"===o?"tbody":"thead")):(nf(n,e.cells,"td",null),Tu(u,e,"footer"===t?"tfoot":"tbody"))},tf=Du("th,td"),rf=Du("th,td,caption"),of=function(n,e,t){return tf(n,t).map(function(n){return ol(e)}).getOr([])},uf=function(n,t){var n=tf(n),e=n.bind(function(n){return q(n)}).map(Fe),r=function(e,n){return N(n,function(n){return v(_r(n.dom.cells),function(n){return"1"===Pe(n,t)||L(n,e)})})};return((n=n).isSome()&&e.isSome()?B.some(r(n.getOrDie(),e.getOrDie())):B.none()).getOr([])},cf={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},lf=function(n,e,t,r,o){void 0===r&&(r={});function u(n){return d(n)&&0<n}var i;return u(e)&&u(t)?(i=r.headerRows||0,r=r.headerColumns||0,Iu(n,t,e,r,i)):(console.error(o),null)},af=function(n){return function(){return n().fold(function(){return[]},function(n){return P(n,function(n){return n.dom})})}},ff=function(e){return function(n){n=0<n.length?B.some(_r(n)):B.none();e(n)}},sf=function(n,e){var l=U.fromTable(n);return jo(l,e).map(function(n){var t,r,e,o,u,i,c=n[n.length-1],n=n[0].column,c=c.column+c.colspan;return sn((e=l,o=n,u=c,U.hasColumns(e)?(e=N(U.justColumns(e),function(n){return n.column>=o&&n.column<u}),e=P(e,function(n){n=oc(n.element);return Bu(n,"span",u-o),n}),i=j.fromTag("colgroup"),Ft(i,e),[i]):[]),(t=n,r=c,P(l.all,function(n){var n=N(n.cells,function(n){return n.column>=t&&n.column<r}),n=P(n,function(n){n=oc(n.element);return Bu(n,"colspan",r-t),n}),e=j.fromTag("tr");return Ft(e,n),e})))})},mf=function(n,e,t){var r=U.fromTable(n);return Sa(r,e).bind(function(n){var e=Eo(r,t,!1),e=g(e).rows.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),n=w(e,function(n){var e=N(n.cells,function(n){return!n.isLocked});return 0<e.length?[A(A({},n),{cells:e})]:[]}),e=Po(n,t);return ic(0<e.length,e)}).map(function(n){return P(n,function(n){var t=er(n.element);return M(n.cells,function(n){var e=oc(n.element);ba(e,"colspan",n.colspan,1),ba(e,"rowspan",n.rowspan,1),K(t,e)}),t})})},df=tinymce.util.Tools.resolve("tinymce.util.Tools"),gf=D(_u,["left","center","right"],"align"),pf=D(_u,["top","middle","bottom"],"valign"),hf=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],bf={normal:Hu(!1),ifTruthy:Hu(!0)},vf=function(n,e){var t,r,o,e=of($(n),e);0!==e.length&&(t=function(i,n){n=qu(n).map(function(n){return P(n,function(n){return t=n.element,r=yo(e=i),n=n.column,o=e.dom,n=n.getOr(t),A({width:(u=function(n,e){return o.getStyle(n,e)||o.getAttrib(n,e)})(n,"width"),height:u(t,"height"),scope:o.getAttrib(t,"scope"),celltype:Fr(t),class:o.getAttrib(t,"class",""),halign:gf(e,t),valign:pf(e,t)},r?ju(o,t):{});var e,t,r,o,u})});return Lu(n.getOrDie())}(n,e),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:Fu(n)},zu("cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:Fu(n)}]},n.windowManager.open({title:"Cell Properties",size:"normal",body:yo(n)?r:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:D(Vu,n,e,t)}))},wf=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],yf=function(o){var n,e,t,r=uf($(o),ul.selected);0!==r.length&&(n=P(r,function(n){return n=n.dom,t=Co(e=o),r=e.dom,A({height:r.getStyle(n,"height")||r.getAttrib(n,"height"),class:r.getAttrib(n,"class",""),type:Za(0,n),align:gf(e,n)},t?ju(r,n):{});var e,t,r}),n=Lu(n),e={type:"tabpanel",tabs:[{title:"General",name:"general",items:Uu(o)},zu("row")]},t={type:"panel",items:[{type:"grid",columns:2,items:Uu(o)}]},o.windowManager.open({title:"Row Properties",size:"normal",body:Co(o)?e:t,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:D(Ku,o,P(r,function(n){return n.dom}),n)}))},Cf=tinymce.util.Tools.resolve("tinymce.Env"),xf=function(n,e){var t,r=n.dom,o=(a=xo(l=n),o=wo(l),f=vo(l),a=a?(a=l.dom,{borderstyle:le(o,"border-style").getOr(""),bordercolor:Wu(a)(le(o,"border-color").getOr("")),backgroundcolor:Wu(a)(le(o,"background-color").getOr(""))}):{},A(A(A(A(A(A({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),o),f),a),(a=o["border-width"],So(l)&&a?{border:a}:le(f,"border").fold(function(){return{}},function(n){return{border:n}}))),(l=le(o,"border-spacing").or(le(f,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),a=le(o,"border-padding").or(le(f,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}}),A(A({},l),a)))),u=(!1===e?(t=r.getParent(n.selection.getStart(),"table",n.getBody()))?(f=t,a=xo(l=n),r=l.dom,o=A({width:r.getStyle(f,"width")||r.getAttrib(f,"width"),height:r.getStyle(f,"height")||r.getAttrib(f,"height"),cellspacing:r.getStyle(f,"border-spacing")||r.getAttrib(f,"cellspacing"),cellpadding:r.getAttrib(f,"cellpadding")||Eu(l.dom,f,"padding"),border:(i=r,u=We(j.fromDom(c=f),"border-width"),So(l)&&u.isSome()?u.getOr(""):i.getAttrib(c,"border")||Eu(l.dom,c,"border-width")||Eu(l.dom,c,"border")),caption:!!r.select("caption",f)[0],class:r.getAttrib(f,"class",""),align:gf(l,f)},a?ju(r,f):{})):xo(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",xo(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")),Nu(n.getParam("table_class_list",[],"array")));0<u.length&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var i,c,l,a,r={type:"grid",columns:2,items:(i=u,c=e?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],l=n.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],a=0<i.length?[{type:"listbox",name:"class",label:"Class",items:i}]:[],c.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(l).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(a))},f=xo(n)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[r]},zu("table")]}:{type:"panel",items:[r]};n.windowManager.open({title:"Table Properties",size:"normal",body:f,onSubmit:D(Gu,n,t,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Sf=function(n){return rf($(n),nl(n))},Tf=function(n){return tf($(n),nl(n))},Rf={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},Df=Zt([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Of=A(A({},Df),{none:function(n){return Df.none(n=void 0===n?void 0:n)}}),Af=function(t,n){return q(t,n).bind(function(n){var e=Ot(n);return R(e,function(n){return L(t,n)}).map(function(n){return{index:n,all:e}})})},cl=Zt([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),f={before:cl.before,on:cl.on,after:cl.after,cata:function(n,e,t,r){return n.fold(e,t,r)},getStart:function(n){return n.fold(a,a,a)}},kf=Zt([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),If={domRange:kf.domRange,relative:kf.relative,exact:kf.exact,exactFromRange:function(n){return kf.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){n=n.match({domRange:function(n){return j.fromDom(n.startContainer)},relative:function(n,e){return f.getStart(n)},exact:function(n,e,t,r){return n}});return j.fromDom(An(n).dom.defaultView)},range:Yu},Bf=Zt([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ef=function(u,n){return ei(u,n).match({ltr:function(n,e,t,r){var o=u.document.createRange();return o.setStart(n.dom,e),o.setEnd(t.dom,r),o},rtl:function(n,e,t,r){var o=u.document.createRange();return o.setStart(t.dom,r),o.setEnd(n.dom,e),o}})},Pf=(Bf.ltr,Bf.rtl,function(n,e,t,r){return he(e)?(u=e,i=t,c=r,(a=(o=n).dom.createRange()).selectNode(u.dom),a=a.getClientRects(),J(a,function(n){return ti(n,i,c)?B.some(n):B.none()}).map(function(n){return ri(o,u,i,c,n)})):(a=e,f=t,s=r,m=(l=n).dom.createRange(),e=F(a),J(e,function(n){return m.selectNode(n.dom),ti(m.getBoundingClientRect(),f,s)?Pf(l,n,f,s):B.none()}));var o,u,i,c,l,a,f,s,m}),Mf=function(n,e){return e-n.left<n.right-e},Nf=function(n,e,t){n=n.dom.createRange();return n.selectNode(e.dom),n.collapse(t),n},Wf=document.caretPositionFromPoint?function(t,n,e){return B.from(t.dom.caretPositionFromPoint(n,e)).bind(function(n){var e;return null===n.offsetNode?B.none():((e=t.dom.createRange()).setStart(n.offsetNode,n.offset),e.collapse(),B.some(e))})}:document.caretRangeFromPoint?function(n,e,t){return B.from(n.dom.caretRangeFromPoint(e,t))}:function(c,l,a){return j.fromPoint(c,l,a).bind(function(r){function n(){return n=c,t=l,(0===F(e=r).length?function(n,e,t){var r=e.dom.getBoundingClientRect(),r=Mf(r,t);return B.some(Nf(n,e,r))}:function(e,n,t){var r=e.dom.createRange(),r=(r.selectNode(n.dom),r.getBoundingClientRect()),o=Mf(r,t);return(!0===o?Uc:Kc)(n).map(function(n){return Nf(e,n,o)})})(n,e,t);var n,e,t}var e,t,o,u,i;return 0===F(r).length?n():(t=r,o=l,u=a,(i=(e=c).dom.createRange()).selectNode(t.dom),i=i.getBoundingClientRect(),e=e,t=t,o=Math.max(i.left,Math.min(i.right,o)),i=Math.max(i.top,Math.min(i.bottom,u)),(u=e.dom.createRange()).selectNode(t.dom),u=u.getBoundingClientRect(),o=Math.max(u.left,Math.min(u.right,o)),u=Math.max(u.top,Math.min(u.bottom,i)),Pf(e,t,o,u).orThunk(n))})},jf=tinymce.util.Tools.resolve("tinymce.util.VK"),Lf=function(e,t,n){return n.fold(B.none,B.none,function(n,e){return Uc(e).map(function(n){return bi(0,n)})},function(n){return q(n,t).bind(function(n){return e.execCommand("mceTableInsertRowAfter"),n=Pn(n,"tr"),Y(n).bind(function(n){return Be(n,"td,th").map(function(n){return bi(0,n)})})})})},zf=["table","li","dl"],_f=wi,Ff=function(n,e){return{item:n,mode:e}},Hf=function(n,e,t,r){return void 0===r&&(r=qf),t.sibling(n,e).map(function(n){return Ff(n,r)})},qf=function(n,e,t,r){void 0===r&&(r=qf);n=n.property().children(e);return t.first(n).map(function(n){return Ff(n,r)})},Vf=[{current:xi,next:Hf,fallback:B.none()},{current:Hf,next:qf,fallback:B.some(xi)},{current:qf,next:qf,fallback:B.some(Hf)}],Uf=function(){return{sibling:function(n,e){return n.query().prevSibling(e)},first:function(n){return 0<n.length?B.some(n[n.length-1]):B.none()}}},Kf=function(){return{sibling:function(n,e){return n.query().nextSibling(e)},first:function(n){return 0<n.length?B.some(n[0]):B.none()}}},$f=function(e,n,t,r,o,u){return Si(e,n,r,o).bind(function(n){return u(n.item)?B.none():t(n.item)?B.some(n.item):$f(e,n.item,t,n.mode,o,u)})},Gf=Kt(),Xf=Zt([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Yf=A(A({},Xf),{verify:function(u,n,e,t,i,c,r){return h(t,"td,th",r).bind(function(o){return h(n,"td,th",r).map(function(r){return L(o,r)?L(t,o)&&Hc(o)===i?c(r):Xf.none("in same cell"):Ji(ki,[o,r]).fold(function(){return n=o,e=(t=u).getRect(r),(t=t.getRect(n)).right>e.left&&t.left<e.right?Xf.success():c(r);var n,e,t},function(n){return c(r)})})}).getOr(Xf.none("default"))},cata:function(n,e,t,r,o){return n.fold(e,t,r,o)}}),Jf=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},Qf=function(n,e){return B.some(n.getRect(e))},Zf=function(n,e,t){return pe(e)?Qf(n,e).map(Jf):he(e)?(n=n,e=e,(0<=(t=t)&&t<Hc(e)?n.getRangedRect(e,t,e,t+1):0<t?n.getRangedRect(e,t-1,e,t):B.none()).map(Jf)):B.none()},ns=function(n,e){return pe(e)?Qf(n,e).map(Jf):he(e)?n.getRangedRect(e,0,e,Hc(e)).map(Jf):B.none()},es=Zt([{none:[]},{retry:["caret"]}]),Fn={point:function(n){return n.bottom},adjuster:function(n,e,t,r,o){var u=Pi(o,5);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?es.retry(u):t.top===o.bottom?es.retry(Pi(o,1)):Wi(n,e,o)?es.retry(Ni(u,5,0)):es.none()},move:Pi,gather:Ai},ts=function(t,r,o,u,i){return 0===i?B.some(u):(n=t,e=u.left,c=r.point(u),n.elementFromPoint(e,c).filter(function(n){return"table"===_(n)}).isSome()?(n=i-1,ts(t,r,o,r.move(u,5),n)):t.situsFromPoint(u.left,r.point(u)).bind(function(n){return n.start.fold(B.none,function(e){return ns(t,e).bind(function(n){return r.adjuster(t,e,n,o,u).fold(B.none,function(n){return ts(t,r,o,n,i-1)})}).orThunk(function(){return B.some(u)})},B.none)}));var n,e,c},rs={tryUp:D(ji,{point:function(n){return n.top},adjuster:function(n,e,t,r,o){var u=Mi(o,5);return Math.abs(t.top-r.top)<1||t.bottom<o.top?es.retry(u):t.bottom===o.top?es.retry(Mi(o,1)):Wi(n,e,o)?es.retry(Ni(u,5,0)):es.none()},move:Mi,gather:Oi}),tryDown:D(ji,Fn),ieTryUp:function(n,e){return n.situsFromPoint(e.left,e.top-5)},ieTryDown:function(n,e){return n.situsFromPoint(e.left,e.bottom+5)},getJumpSize:m(5)},os=function(n,e,t){var r=ne().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(n,t):r.isIE()?e.ieRetry(n,t):B.none()},us=function(o,u,e,i){function t(n){c.on(function(r){i.clearBeforeUpdate(u),Ki(n.target,e).each(function(t){Qi(r,t,e).each(function(n){var e=n.boxes.getOr([]);(1<e.length||1===e.length&&!L(r,t))&&(i.selectRange(u,e,n.start,n.finish),o.selectContents(t))})})})}r=Nc(B.none());var r,c={clear:function(){return r.set(B.none())},set:function(n){return r.set(B.some(n))},isSet:function(){return r.get().isSome()},on:function(n){return r.get().each(n)}},l=c.clear;return{clearstate:l,mousedown:function(n){i.clear(u),Ki(n.target,e).each(c.set)},mouseover:function(n){t(n)},mouseup:function(n){t(n),l()}}},is={traverse:xe,gather:Ai,relative:f.before,otherRetry:rs.tryDown,ieRetry:rs.ieTryDown,failure:Yf.failedDown},cs={traverse:In,gather:Oi,relative:f.before,otherRetry:rs.tryUp,ieRetry:rs.ieTryUp,failure:Yf.failedUp},ls=$i(38),as=$i(40),fs=function(n){return 37<=n&&n<=40},ss={isBackward:$i(37),isForward:$i(39)},ms={isBackward:$i(39),isForward:$i(37)},ds=function(u){return{elementFromPoint:function(n,e){return j.fromPoint(j.fromDom(u.document),n,e)},getRect:function(n){return n.dom.getBoundingClientRect()},getRangedRect:function(n,e,t,r){n=If.exact(n,e,t,r);return 0<(t=0<(t=(e=Ef(e=u,t=n)).getClientRects()).length?t[0]:e.getBoundingClientRect()).width||0<t.height?B.some(t).map(Zu):B.none()},getSelection:function(){return hi(u).map(function(n){return yi(u,n)})},fromSitus:function(n){n=If.relative(n.start,n.finish);return yi(u,n)},situsFromPoint:function(n,e){return t=u,n=n=n,e=e=e,t=j.fromDom(u.document),Wf(t,n,e).map(function(n){return Yu(j.fromDom(n.startContainer),n.startOffset,j.fromDom(n.endContainer),n.endOffset)}).map(function(n){return wi(n.start,n.soffset,n.finish,n.foffset)});var t},clearSelection:function(){ci(u).each(function(n){return n.removeAllRanges()})},collapseSelection:function(o){void 0===o&&(o=!1),hi(u).each(function(n){return n.fold(function(n){return n.collapse(o)},function(n,e){n=o?n:e;mi(u,n,n)},function(n,e,t,r){n=o?n:t,t=o?e:r;si(u,n,t,n,t)})})},setSelection:function(n){si(u,n.start,n.soffset,n.finish,n.foffset)},setRelativeSelection:function(n,e){mi(u,n,e)},selectContents:function(n){var e,t;n=n=n,(t=(e=u).document.createRange()).selectNodeContents(n.dom),li(e,n=t)},getInnerHeight:function(){return u.innerHeight},getScrollY:function(){var n=j.fromDom(u.document),n=void 0!==n?n.dom:document,e=n.body.scrollLeft||n.documentElement.scrollLeft,n=n.body.scrollTop||n.documentElement.scrollTop;return gc(e,n).top},scrollBy:function(n,e){var t=j.fromDom(u.document);(t=(void 0!==t?t.dom:document).defaultView)&&t.scrollBy(n,e)}}},gs=function(n,m,d,g){function l(){return g.clear(m),B.none()}var a=ds(n);return{keydown:function(n,e,t,r,o,u){var n=n.raw,i=n.which,c=!0===n.shiftKey;return Xt(m,g.selectedSelector).fold(function(){return as(i)&&c?D(Ui,a,m,d,is,r,e,g.selectRange):ls(i)&&c?D(Ui,a,m,d,cs,r,e,g.selectRange):as(i)?D(Hi,a,d,is,r,e,Vi):ls(i)?D(Hi,a,d,cs,r,e,qi):B.none},function(o){function n(n){return function(){return J(n,function(n){return e=n.rows,n=n.cols,t=m,Jt(o,e,n,(r=g).firstSelectedSelector,r.lastSelectedSelector).map(function(n){return r.clearBeforeUpdate(t),r.selectRange(t,n.boxes,n.start,n.finish),n.boxes});var e,t,r}).fold(function(){return Yt(m,g.firstSelectedSelector,g.lastSelectedSelector).map(function(n){var e=as(i)||u.isForward(i)?f.after:f.before;return a.setRelativeSelection(f.on(n.first,0),e(n.table)),g.clear(m),vi(B.none(),!0)})},function(n){return B.some(vi(B.none(),!0))})}}return as(i)&&c?n([Gi(1,0)]):ls(i)&&c?n([Gi(-1,0)]):u.isBackward(i)&&c?n([Gi(0,-1),Gi(-1,0)]):u.isForward(i)&&c?n([Gi(0,1),Gi(1,0)]):fs(i)&&0==c?l:B.none})()},keyup:function(c,l,a,f,s){return Xt(m,g.selectedSelector).fold(function(){var t,r,n,o,u,e=c.raw,i=e.which;return 0==(!0===e.shiftKey)||!fs(i)||(t=m,r=d,e=a,i=s,u=g.selectRange,L(n=l,o=f)&&e===i)?B.none():h(n,"td,th",r).bind(function(e){return h(o,"td,th",r).bind(function(n){return Ci(t,r,e,n,u)})})},B.none)}}},ps=function(o,u,e){function t(n){H(n,o.selected),H(n,o.firstSelected),H(n,o.lastSelected)}function i(n){b(n,o.selected,"1")}function c(n){r(n),e()}function r(n){n=Pn(n,o.selectedSelector),M(n,t)}return{clearBeforeUpdate:r,clear:c,selectRange:function(n,e,t,r){c(n),M(e,i),b(t,o.firstSelected,"1"),b(r,o.lastSelected,"1"),u(e,t,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},hs=function(n,e,i){var c=U.fromTable(n);return Sa(c,e).map(function(n){var e,t,r,o,u=Eo(c,i,!1);return{upOrLeftCells:(r=i,o=u.slice(0,(e=n)[e.length-1].row+1),o=Po(o,r),w(o,function(n){n=n.cells.slice(0,e[e.length-1].column+1);return P(n,function(n){return n.element})})),downOrRightCells:(r=i,o=u.slice((t=n)[0].row+t[0].rowspan-1,u.length),n=Po(o,r),w(n,function(n){n=n.cells.slice(t[0].column+t[0].colspan-1,n.cells.length);return P(n,function(n){return n.element})}))}})},bs=function(n){return!1===lo(j.fromDom(n.target),"ephox-snooker-resizer-bar")};function vs(h,b,n){var v=ps(ul,function(r,o,u){n.targets().each(function(t){q(o).each(function(n){var e=ua(h),e=Xc(I,j.fromDom(h.getDoc()),e),n=hs(n,t,e);h.fire("TableSelectionChange",{cells:r,start:o,finish:u,otherCells:n})})})},function(){h.fire("TableSelectionClear")});return h.on("init",function(n){function o(n,t){u.clearBeforeUpdate(r),Qi(n,t,e).each(function(n){var e=n.boxes.getOr([]);u.selectRange(r,e,n.start,n.finish),i.selectContents(t),i.collapseSelection()})}var r,e,u,i,t=h.getWin(),c=Jc(h),l=nl(h),a=(p=ds(t),{clearstate:(p=us(p,c,l,v)).clearstate,mousedown:p.mousedown,mouseover:p.mouseover,mouseup:p.mouseup}),f=gs(t,c,l,v);r=c,e=l,u=v,i=ds(t);h.on("TableSelectorChange",function(n){return o(n.start,n.finish)});function s(n,e){!0===n.raw.shiftKey&&(e.kill&&n.kill(),e.selection.each(function(n){n=If.relative(n.start,n.finish),n=Ef(t,n);h.selection.setRng(n)}))}function m(n){return 0===n.button}d=Nc(j.fromDom(c)),g=Nc(0);var d,g,p={touchEnd:function(n){var e,t,r=j.fromDom(n.target);"td"!==_(r)&&"th"!==_(r)||(e=d.get(),t=g.get(),L(e,r)&&n.timeStamp-t<300&&(n.preventDefault(),o(r,r))),d.set(r),g.set(n.timeStamp)}};h.on("dragstart",function(n){a.clearstate()}),h.on("mousedown",function(n){m(n)&&bs(n)&&a.mousedown(Pl(n))}),h.on("mouseover",function(n){var e;(void 0===(e=n).buttons||Cf.browser.isEdge()&&0===e.buttons||0!=(1&e.buttons))&&bs(n)&&a.mouseover(Pl(n))}),h.on("mouseup",function(n){m(n)&&bs(n)&&a.mouseup(Pl(n))}),h.on("touchend",p.touchEnd),h.on("keyup",function(n){var e,t,r=Pl(n);r.raw.shiftKey&&fs(r.raw.which)&&(n=h.selection.getRng(),e=j.fromDom(n.startContainer),t=j.fromDom(n.endContainer),f.keyup(r,e,n.startOffset,t,n.endOffset).each(function(n){s(r,n)}))}),h.on("keydown",function(n){var e=Pl(n),n=(b().each(function(n){return n.hideBars()}),h.selection.getRng()),t=j.fromDom(n.startContainer),r=j.fromDom(n.endContainer),o=mc(ss,ms)(j.fromDom(h.selection.getStart()));f.keydown(e,t,n.startOffset,r,n.endOffset,o).each(function(n){s(e,n)}),b().each(function(n){return n.showBars()})}),h.on("NodeChange",function(){var n=h.selection,e=j.fromDom(n.getStart()),n=j.fromDom(n.getEnd());Ji(q,[e,n]).fold(function(){return v.clear(c)},I)})}),{clear:v.clear}}function ws(n,r){function e(e){return f.forall(function(n){return!n[e]})}function t(){return rf($(n),nl(n)).bind(function(t){return q(t).map(function(n){return s(t)?{element:e=t,mergable:B.none(),unmergable:B.none(),selection:[e]}:il(r,n,t);var e})})}function o(e){return q(e.element).map(function(n){var t=U.fromTable(n),n=Sa(t,e).getOr([]),n=W(n,function(n,e){return e.isLocked&&(n.onAny=!0,0===e.column?n.onFirst=!0:e.column+e.colspan>=t.grid.columns&&(n.onLast=!0)),n},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Ta(t,e).isSome(),unmergeable:Ra(t,e).isSome(),locked:n}})}function u(){l.set(Nn(t)()),f=l.get().bind(o),M(a.get(),function(n){return n()})}function i(e,t){function r(){return l.get().fold(function(){e.setDisabled(!0)},function(n){e.setDisabled(t(n))})}return r(),a.set(a.get().concat([r])),function(){a.set(N(a.get(),function(n){return n!==r}))}}function c(e){return f.exists(function(n){return n.locked[e]})}var l=Nc(B.none()),a=Nc([]),f=B.none(),s=we("caption");return n.on("NodeChange ExecCommand TableSelectorChange",u),{onSetupTable:function(n){return i(n,function(n){return!1})},onSetupCellOrRow:function(n){return i(n,function(n){return s(n.element)})},onSetupColumn:function(e){return function(n){return i(n,function(n){return s(n.element)||c(e)})}},onSetupPasteable:function(e){return function(n){return i(n,function(n){return s(n.element)||e().isNone()})}},onSetupPasteableColumn:function(e,t){return function(n){return i(n,function(n){return s(n.element)||e().isNone()||c(t)})}},onSetupMergeable:function(n){return i(n,function(n){return e("mergeable")})},onSetupUnmergeable:function(n){return i(n,function(n){return e("unmergeable")})},resetTargets:u,targets:function(){return l.get()}}}Hn.add("table",function(i){n=function(){return Jc(i)},e=function(){return rf($(i))},t=ul.selectedSelector;var n,e,t,r,o,u,c,l,a,f,s,m,d,g,p,h,b,v,w,y={get:function(){return Zi(n(),t).fold(function(){return e().map(rc).getOrThunk(ec)},function(n){return tc(n)})}},C=ws(i,y),x=Do(i),S=vs(i,x.lazyResize,C),T=Ou(i,x.lazyWire,y),R=(r=Nc(B.none()),o=Nc(B.none()),u=function(n){n.set(B.none())},{getRows:r.get,setRows:function(n){r.set(n),u(o)},clearRows:function(){return u(r)},getColumns:o.get,setColumns:function(n){o.set(n),u(r)},clearColumns:function(){return u(o)}}),D=(Xu(i,T,S,y,R),b=T,v=y,w=nl(h=i),z({mceTableRowType:function(){return b.getTableRowType(h)},mceTableCellType:function(){return b.getTableCellType(h)},mceTableColType:function(){return tf($(h)).bind(function(t){return q(t,w).map(function(n){var e=il(v,n,t);return b.getTableColType(n,e)})}).getOr("")}},function(n,e){return h.addQueryValueHandler(e,n)}),d=y,g=T,p=S,(m=i).on("BeforeGetContent",function(t){!0===t.selection&&nc(d.get(),I,function(n){t.preventDefault(),q(n[0]).map(function(n){n=Fc(n,"[data-mce-selected]");return el(n),[n]}).each(function(n){var e;t.content=("text"===t.format?P(n,function(n){return n.dom.innerText}):(e=m,P(n,function(n){return e.selection.serializer.serialize(n.dom,{})}))).join("")})},I)}),m.on("BeforeSetContent",function(o){!0===o.selection&&!0===o.paste&&B.from(m.dom.getParent(m.selection.getStart(),"th,td")).each(function(n){var r=j.fromDom(n);q(r).each(function(e){var n,t=N((t=o.content,(n=document.createElement("div")).innerHTML=t,F(j.fromDom(n))),function(n){return"meta"!==_(n)});1===t.length&&(n=t[0],"table"===_(n))&&(o.preventDefault(),n=j.fromDom(m.getDoc()),n=Yc(n),t={element:r,clipboard:t[0],generators:n},g.pasteCells(e,t).each(function(n){m.selection.setRng(n.rng),m.focus(),p.clear(e)}))})})}),a=i,y=R,T={text:"Table properties",onSetup:(f=C).onSetupTable,onAction:A("mceTableProps")},s={text:"Delete table",icon:"table-delete-table",onSetup:f.onSetupTable,onAction:A("mceTableDelete")},a.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:A("mceTableInsertRowBefore"),onSetup:f.onSetupCellOrRow}),a.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:A("mceTableInsertRowAfter"),onSetup:f.onSetupCellOrRow}),a.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:A("mceTableDeleteRow"),onSetup:f.onSetupCellOrRow}),a.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:A("mceTableRowProps"),onSetup:f.onSetupCellOrRow}),a.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:A("mceTableCutRow"),onSetup:f.onSetupCellOrRow}),a.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:A("mceTableCopyRow"),onSetup:f.onSetupCellOrRow}),a.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:A("mceTablePasteRowBefore"),onSetup:f.onSetupPasteable(y.getRows)}),a.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:A("mceTablePasteRowAfter"),onSetup:f.onSetupPasteable(y.getRows)}),a.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:A("mceTableInsertColBefore"),onSetup:f.onSetupColumn("onFirst")}),a.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:A("mceTableInsertColAfter"),onSetup:f.onSetupColumn("onLast")}),a.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:A("mceTableDeleteCol"),onSetup:f.onSetupColumn("onAny")}),a.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:A("mceTableCutCol"),onSetup:f.onSetupColumn("onAny")}),a.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:A("mceTableCopyCol"),onSetup:f.onSetupColumn("onAny")}),a.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:A("mceTablePasteColBefore"),onSetup:f.onSetupPasteableColumn(y.getColumns,"onFirst")}),a.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:A("mceTablePasteColAfter"),onSetup:f.onSetupPasteableColumn(y.getColumns,"onLast")}),a.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:A("mceTableCellProps"),onSetup:f.onSetupCellOrRow}),a.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:A("mceTableMergeCells"),onSetup:f.onSetupMergeable}),a.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:A("mceTableSplitCells"),onSetup:f.onSetupUnmergeable}),!1===a.getParam("table_grid",!0,"boolean")?a.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:A("mceInsertTable")}):a.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:k}]}}),a.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:A("mceInsertTable")}),a.ui.registry.addMenuItem("tableprops",T),a.ui.registry.addMenuItem("deletetable",s),a.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),a.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),a.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),a.ui.registry.addContextMenu("table",{update:function(){return f.resetTargets(),f.targets().fold(function(){return""},function(n){return"caption"===_(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}}),i),y=C,T=R;function O(n){return function(){return D.execCommand(n)}}return D.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}}),D.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:O("mceTableProps"),icon:"table",onSetup:y.onSetupTable}),D.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:O("mceTableDelete"),icon:"table-delete-table",onSetup:y.onSetupTable}),D.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:O("mceTableCellProps"),icon:"table-cell-properties",onSetup:y.onSetupCellOrRow}),D.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:O("mceTableMergeCells"),icon:"table-merge-cells",onSetup:y.onSetupMergeable}),D.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:O("mceTableSplitCells"),icon:"table-split-cells",onSetup:y.onSetupUnmergeable}),D.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:O("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:y.onSetupCellOrRow}),D.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:O("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:y.onSetupCellOrRow}),D.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:O("mceTableDeleteRow"),icon:"table-delete-row",onSetup:y.onSetupCellOrRow}),D.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:O("mceTableRowProps"),icon:"table-row-properties",onSetup:y.onSetupCellOrRow}),D.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:O("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:y.onSetupColumn("onFirst")}),D.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:O("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:y.onSetupColumn("onLast")}),D.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:O("mceTableDeleteCol"),icon:"table-delete-column",onSetup:y.onSetupColumn("onAny")}),D.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:O("mceTableCutRow"),onSetup:y.onSetupCellOrRow}),D.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:O("mceTableCopyRow"),onSetup:y.onSetupCellOrRow}),D.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:O("mceTablePasteRowBefore"),onSetup:y.onSetupPasteable(T.getRows)}),D.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:O("mceTablePasteRowAfter"),onSetup:y.onSetupPasteable(T.getRows)}),D.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:O("mceTableCutCol"),onSetup:y.onSetupColumn("onAny")}),D.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:O("mceTableCopyCol"),onSetup:y.onSetupColumn("onAny")}),D.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:O("mceTablePasteColBefore"),onSetup:y.onSetupPasteableColumn(T.getColumns,"onFirst")}),D.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:O("mceTablePasteColAfter"),onSetup:y.onSetupPasteableColumn(T.getColumns,"onLast")}),D.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:O("mceInsertTable"),icon:"table"}),0<(s=(c=i).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&c.ui.registry.addContextToolbar("table",{predicate:function(n){return c.dom.is(n,"table")&&c.getBody().contains(n)},items:s,scope:"node",position:"node"}),i.on("PreInit",function(){i.serializer.addTempAttr(ul.firstSelected),i.serializer.addTempAttr(ul.lastSelected),i.formatter.register(Rf)}),i.getParam("table_tab_navigation",!0,"boolean")&&i.on("keydown",function(n){var e,t,r,o=i,u=S;(e=n).keyCode===jf.TAB&&(t=Jc(o),r=function(n){var e=_(n);return L(n,t)||E(zf,e)},n=o.selection.getRng(),n=j.fromDom(e.shiftKey?n.startContainer:n.endContainer),Dt(n,r).each(function(n){e.preventDefault(),q(n,r).each(u.clear),o.selection.collapse(e.shiftKey),(e.shiftKey?function(n,e,t){return Lf(n,e,Af(r=t,void 0).fold(function(){return Of.none()},function(n){return 0<=n.index-1?Of.middle(r,n.all[n.index-1]):Of.first(r)}));var r}:function(n,e,t){return Lf(n,e,Af(r=t,void 0).fold(function(){return Of.none(r)},function(n){return n.index+1<n.all.length?Of.middle(r,n.all[n.index+1]):Of.last(r)}));var r})(o,r,n).each(function(n){o.selection.setRng(n)})}))}),i.on("remove",function(){x.destroy()}),y=x,T=C,{insertTable:(l=i,function(n,e,t){e=lf(l,e,n,t=void 0===t?{}:t,"Invalid values for insertTable - rows and columns values are required to insert a table.");return l.undoManager.add(),e}),setClipboardRows:ff((s=R).setRows),getClipboardRows:af(s.getRows),setClipboardCols:ff(s.setColumns),getClipboardCols:af(s.getColumns),resizeHandler:y,selectionTargets:T};function A(n){return function(){return a.execCommand(n)}}function k(n){a.execCommand("mceInsertTable",!1,{rows:n.numRows,columns:n.numColumns})}})}();