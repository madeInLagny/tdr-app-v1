!function(){"use strict";function r(t,o,e){t.dom.toggleClass(t.getBody(),"mce-visualblocks"),e.set(!e.get()),t=t,e=e.get(),t.fire("VisualBlocks",{state:e})}function f(e,n){return function(o){o.setActive(n.get());function t(t){return o.setActive(t.state)}return e.on("VisualBlocks",t),function(){return e.off("VisualBlocks",t)}}}var t=tinymce.util.Tools.resolve("tinymce.PluginManager");t.add("visualblocks",function(t,o){e=!1;var e,n,i,s,c,u,l={get:function(){return e},set:function(t){e=t}},a=l;(n=t).addCommand("mceVisualBlocks",function(){r(n,0,a)}),(i=t).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return i.execCommand("mceVisualBlocks")},onSetup:f(i,s=l)}),i.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:function(){return i.execCommand("mceVisualBlocks")},onSetup:f(i,s)}),u=l,(c=t).on("PreviewFormats AfterPreviewFormats",function(t){u.get()&&c.dom.toggleClass(c.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),c.on("init",function(){c.getParam("visualblocks_default_state",!1,"boolean")&&r(c,0,u)})})}();