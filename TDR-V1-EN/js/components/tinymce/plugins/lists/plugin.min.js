!function(){"use strict";function M(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function U(t){return function(e){return typeof e===t}}function _(){}function $(t){return function(e){return!t(e)}}function e(){return it}function F(n){function e(){return o}function t(e){return e(n)}var r=g(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:ot,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return F(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:it},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(i,function(e){return t(n,e)})}};return o}function l(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function j(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function q(e,t,n){return l(e,function(e){n=t(n,e)}),n}function u(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return h.some(i);if(n(i,r))break}return h.none()}function H(e,t){return u(e,t,i)}function K(e){return(e=at.call(e,0)).reverse(),e}function V(e,t){return 0<=t&&t<e.length?h.some(e[t]):h.none()}function W(e){return V(e,0)}function a(e){return V(e,e.length-1)}function Q(){return X(0,0)}function X(e,t){return{major:e,minor:t}}function z(e,t){var n=String(t).toLowerCase();return H(e,function(e){return e.search(n)})}function n(e,t){return-1!==e.indexOf(t)}function t(t){return function(e){return n(e,t)}}function Y(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(ht),isSafari:t("Safari")}}function Z(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(yt),isiOS:t("iOS"),isAndroid:t(St),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(Ct),isFreeBSD:t(bt),isChromeOS:t(Ot)}}function G(e){return window.matchMedia(e).matches}function J(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function ee(e,t){return e.dom===t.dom}function te(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ze||(Ze=!0,Ye=ze.apply(null,e)),Ye}().browser.isIE()?(o=t,r=(r=e).dom,o=t.dom,n=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(r.compareDocumentPosition(o)&n)):(r=e.dom)!==(o=t.dom)&&r.contains(o);var n,r,o}function r(e,t){if(1!==(e=e.dom).nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function ne(e,t){for(var n=wt(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function re(e){return e.dom.nodeName.toLowerCase()}function oe(e){return 1===e.dom.nodeType}function s(e,t){var r=e.dom;ne(t,function(e,t){var n=r;if(!(Je(e)||tt(e)||rt(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")})}function ie(e){return q(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function ae(e){return h.from(e.dom.parentNode).map(b)}function se(e,t){return e=e.dom.childNodes,h.from(e[t]).map(b)}function ue(e){return se(e,0)}function ce(e){return se(e,e.dom.childNodes.length-1)}function le(t,n){ae(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})}function c(e,t){e.dom.appendChild(t.dom)}function de(t,e){l(e,function(e){c(t,e)})}function fe(e){null!==(e=e.dom).parentNode&&e.parentNode.removeChild(e)}function me(e){return b(e.dom.cloneNode(!0))}function pe(e,t){n=e,t=C(t),n=ie(n),s(t,n);var n=t,t=(le(e,n),At(e));return de(n,t),fe(e),n}function ge(t){return function(e){return e&&e.nodeName.toLowerCase()===t}}function o(t){return function(e){return e&&t.test(e.nodeName)}}function d(e){return e&&3===e.nodeType}function he(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}function ve(e,t){return e&&e.nodeName in t}function m(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r}function ye(e,t){return e.isChildOf(t,e.getRoot())}function Se(e,t){var n,r,o,i,a=e.dom,s=e.schema.getBlockElements(),u=a.createFragment(),c=!1===(n=e.getParam("forced_root_block","p"))?"":!0===n?"p":n;if(c&&((o=a.create(c)).tagName===c.toUpperCase()&&a.setAttribs(o,e.getParam("forced_root_block_attrs",{})),ve(t.firstChild,s)||u.appendChild(o)),t)for(;r=t.firstChild;){var l=r.nodeName;i||"SPAN"===l&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),ve(r,s)?(u.appendChild(r),o=null):(c?(o||(o=a.create(c),u.appendChild(o)),o):u).appendChild(r)}return c?i||o.appendChild(a.create("br",{"data-mce-bogus":"1"})):u.appendChild(a.create("br")),u}function Ce(u,c){r(c,"dd")?pe(c,"dt"):r(c,"dt")&&ae(c).each(function(e){var t=u,e=e.dom,n=c.dom,r=w.select('span[data-mce-type="bookmark"]',e),o=Se(t,n),i=w.createRng();i.setStartAfter(n),i.setEndAfter(e);for(var a,s=(i=i.extractContents()).firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&t.dom.isEmpty(s)){w.remove(s);break}t.dom.isEmpty(i)||w.insertAfter(i,e),w.insertAfter(o,e),m(t.dom,n.parentNode)&&(a=n.parentNode,N.each(r,function(e){a.parentNode.insertBefore(e,n.parentNode)}),w.remove(a)),w.remove(n),m(t.dom,e)&&w.remove(e)})}function be(e){r(e,"dt")&&pe(e,"dd")}function Oe(e,t){var n;return d(e)?{container:e,offset:t}:(n=Lt.getNode(e,t),d(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&d(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&d(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t})}function p(e){var t=e.cloneRange(),n=Oe(e.startContainer,e.startOffset),n=(t.setStart(n.container,n.offset),Oe(e.endContainer,e.endOffset));return t.setEnd(n.container,n.offset),t}function Ne(e){r=Mt(n=e,n.selection.getStart()),n=j(n.selection.getSelectedBlocks(),xt);var t,n,r=r.toArray().concat(n);return t=e,n=v(r,function(e){return Mt(t,e).getOr(e)}),It.unique(n)}function Le(e,t,n){return e.isSome()&&t.isSome()?h.some(n(e.getOrDie(),t.getOrDie())):h.none()}function Te(e,t){c(e.item,t.list)}function we(e,t){for(var n,r=0;r<e.length-1;r++){n=e[r].item,n=n.dom;{var o="list-style-type";var i="none";if(!Je(i))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);void 0!==n.style&&nt(n.style.getPropertyValue)&&n.style.setProperty(o,i)}}a(e).each(function(e){s(e.list,t.listAttributes),s(e.item,t.itemAttributes),de(e.item,t.content)})}function Ae(o,e,i){return e=e.slice(0,i.depth),a(e).each(function(e){var t=i.itemAttributes,n=i.content,r=C("li",o);s(r,t),de(r,n),c((t=e).list,n=r),t.item=n,r=i,re((t=e).list)!==r.listType&&(t.list=pe(t.list,r.listType)),s(t.list,r.listAttributes)}),e}function xe(e,t,n){for(var r=e=function(e,t,n){for(var r,o=[],i=0;i<n;i++)o.push((r=t.listType,r={list:C(r,r=e),item:C("li",r)},c(r.list,r.item),r));return o}(e,n,n.depth-t.length),o=1;o<r.length;o++)Te(r[o-1],r[o]);return we(e,n),n=e,Le(a(t),W(n),Te),t.concat(e)}function ke(e){return ue(e).map(D).getOr(!1)}function De(e){return 0<e.depth}function Ee(e){return e.isSelected}function Be(s){return l(s,function(a,e){var t,n,r=(t=s)[n=e].depth,o=function(e){return e.depth===r&&!e.dirty},i=function(e){return e.depth<r};u(K(t.slice(0,n)),o,i).orThunk(function(){return u(t.slice(n+1),o,i)}).fold(function(){var e,t,n,r,o,i;a.dirty&&(a.listAttributes=(e=a.listAttributes,n=function(e,t){return"start"!==t},r=t={},o=function(e,t){r[t]=e},i=_,ne(e,function(e,t){(n(e,t)?o:i)(e,t)}),t))},function(e){a.listType=e.listType,a.listAttributes=ct({},e.listAttributes)})}),s}function Ie(n,e){return e=Be(e),v(e,function(e){e=e.content,t=document.createDocumentFragment(),l(e,function(e){t.appendChild(e.dom)});var t,e=b(t);return b(Se(n,e.dom))})}function Pe(e,t){var t=Be(t),n=e.contentDocument,e=q(t,function(e,t){return(t.depth>e.length?xe:Ae)(n,e,t)},[]);return W(e).map(function(e){return e.list}).toArray()}function Re(i,e,a){e=e,o=v(Rt(i),b),t=Le(H(o,$(ke)),H(K(o),$(ke)),function(e,t){return{start:e,end:t}}),n=!1,r={get:function(){return n},set:function(e){n=e}};var t,n,r,o=v(e,function(e){return{sourceList:e,entries:E(0,t,r,e)}});l(o,function(e){var t=e.entries,n=a;l(j(t,Ee),function(e){var t=e;switch(n){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0});r=i,t=e.entries;var r,o,t=ut(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var s=e[i],u=t(s);u!==n&&(r.push(o),o=[]),n=u,o.push(s)}return 0!==o.length&&r.push(o),r}(t,De),function(e){return(W(e).map(De).getOr(!1)?Pe:Ie)(r,e)});l(t,function(e){k(i,"Indent"===a?"IndentList":"OutdentList",e.dom)}),o=e.sourceList,l(t,function(e){le(o,e)}),fe(e.sourceList)})}function Me(e,t,n){function r(e){e=u(e.parents,L,Bt).filter(function(e){return e.nodeName===t&&!Ht(e)}).isSome(),n(e)}var o=e.dom.getParents(e.selection.getNode());return r({parents:o}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}function Ue(n,e){N.each(e,function(e,t){n.setAttribute(t,e)})}function _e(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&T(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(he(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function $e(e,t,n){var r,o=A(e),i=Pt(e),n=f(n)?n:{};0<i.length?Xt(e,o,i,t,n):(i=t,t=n,(n=o)!==(o=e).getBody()&&(n?n.nodeName!==i||zt(t)||Ht(n)?(e=P(o.selection.getRng(!0)),Kt(o.dom,n,t),r=o.dom.rename(n,i),Qt(o.dom,r),o.selection.setRng(R(e)),Vt(o,i,t),k(o,qt(i),r)):B(o):(Vt(o,i,t),k(o,qt(i),n))))}function Fe(e,t,n,r){var o=t.startContainer,t=t.startOffset;if(d(o)&&(n?t<o.data.length:0<t))return o;var i=e.schema.getNonEmptyElements(),a=(1===o.nodeType&&(o=Lt.getNode(o,t)),new Tt(o,r));for(n&&(t=e.dom,T(r=o))&&t.isBlock(r.nextSibling)&&!T(r.previousSibling)&&a.next();o=a[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(d(o)&&0<o.data.length)return o}}function je(e,t){return 1===(t=t.childNodes).length&&!L(t[0])&&e.isBlock(t[0])}function qe(t,e,n){var r,o=e.parentNode;if(ye(t,e)&&ye(t,n)){L(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&T(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&T(o)&&e.hasChildNodes()&&t.remove(o),m(t,n,!0)&&t.$(n).empty();var i,a,o=t,s=e,u=n,c=je(o,u)?u.firstChild:u;if(je(u=o,a=s)&&u.remove(a.firstChild,!0),!m(o,s,!0))for(;i=s.firstChild;)c.appendChild(i);r&&n.appendChild(r),u=te(b(n),b(e))?t.getParents(e,L,n):[],t.remove(e),l(u,function(e){m(t,e)&&e!==t.getRoot()&&t.remove(e)})}}function He(e,t){return e.selection.isCollapsed()?Gt(r=e,t=t)||Jt(r,t):(r=(n=e).selection.getStart(),t=x(n,r),!!(n.dom.getParent(r,"LI,DT,DD",t)||0<Rt(n).length)&&(n.undoManager.transact(function(){n.execCommand("Delete"),Zt(n.dom,n.getBody())}),!0));var n,r}function Ke(e){return e=K(e.replace(Xe,"").split("")),e=v(e,function(e,t){e=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*e}),q(e,function(e,t){return e+t},0)}function Ve(e){var t;return--e<0?"":(t=e%26,e=Math.floor(e/26),Ve(e)+String.fromCharCode("A".charCodeAt(0)+t))}function We(t,n){return function(){var e=A(t);return e&&e.nodeName===n}}function Qe(e){e.addCommand("mceListProps",function(){en(e)})}var Xe,ze,Ye,Ze,Ge=tinymce.util.Tools.resolve("tinymce.PluginManager"),Je=M("string"),f=M("object"),et=M("array"),tt=U("boolean"),nt=U("function"),rt=U("number"),g=function(e){return function(){return e}},i=g(!1),ot=g(!0),it=(S=function(e){return e.isNone()},{fold:function(e,t){return e()},is:i,isSome:i,isNone:ot,getOr:y=function(e){return e},getOrThunk:pt=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:y,orThunk:pt,map:e,each:_,bind:e,exists:i,forall:ot,filter:e,equals:S,equals_:S,toArray:function(){return[]},toString:g("none()")}),h={some:F,none:e,from:function(e){return null==e?it:F(e)}},at=Array.prototype.slice,st=Array.prototype.push,v=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},ut=function(e,t){for(var n=v(e,t),r=[],o=0,i=n.length;o<i;++o){if(!et(n[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+n);st.apply(r,n[o])}return r},ct=function(){return(ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},lt=function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?Q():(r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e=e,n=t))?X((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},dt=Q,ft=function(e,n){return z(e,n).map(function(e){var t=lt(e.versionRegexes,n);return{current:e.name,version:t}})},mt=function(e,n){return z(e,n).map(function(e){var t=lt(e.versionRegexes,n);return{current:e.name,version:t}})},y=(Xe=/^\s+|\s+$/g,/.*?version\/\ ?([0-9]+)\.([0-9]+).*/),pt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return n(e,"edge/")&&n(e,"chrome")&&n(e,"safari")&&n(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,y],search:function(e){return n(e,"chrome")&&!n(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return n(e,"msie")||n(e,"trident")}},{name:"Opera",versionRegexes:[y,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:t("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:t("firefox")},{name:"Safari",versionRegexes:[y,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(n(e,"safari")||n(e,"mobile/"))&&n(e,"applewebkit")}}],S=[{name:"Windows",search:t("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return n(e,"iphone")||n(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:t("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:t("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:t("linux"),versionRegexes:[]},{name:"Solaris",search:t("sunos"),versionRegexes:[]},{name:"FreeBSD",search:t("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:t("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gt={browsers:g(pt),oses:g(S)},ht="Firefox",vt={unknown:function(){return Y({current:void 0,version:dt()})},nu:Y,edge:g("Edge"),chrome:g("Chrome"),ie:g("IE"),opera:g("Opera"),firefox:g(ht),safari:g("Safari")},yt="Windows",St="Android",Ct="Solaris",bt="FreeBSD",Ot="ChromeOS",Nt={unknown:function(){return Z({current:void 0,version:dt()})},nu:Z,windows:g(yt),ios:g("iOS"),android:g(St),linux:g("Linux"),osx:g("OSX"),solaris:g(Ct),freebsd:g(bt),chromeos:g(Ot)},C=(Ze=!(ze=function(){return e=navigator.userAgent,t=G,a=gt.browsers(),s=gt.oses(),a=ft(a,e).fold(vt.unknown,vt.nu),s=mt(s,e).fold(Nt.unknown,Nt.nu),{browser:a,os:s,deviceType:(a=a,e=e,t=t,n=(s=s).isiOS()&&!0===/ipad/i.test(e),r=s.isiOS()&&!n,o=(i=s.isiOS()||s.isAndroid())||t("(pointer:coarse)"),t=n||!r&&i&&t("(min-device-width:768px)"),i=r||i&&!t,a=a.isSafari()&&s.isiOS()&&!1===/safari/i.test(e),e=!i&&!t&&!a,{isiPad:g(n),isiPhone:g(r),isTablet:g(t),isPhone:g(i),isTouch:g(o),isAndroid:s.isAndroid,isiOS:s.isiOS,isWebView:g(a),isDesktop:g(e)})};var e,t,n,r,o,i,a,s}),function(e,t){t=(t||document).createElement(e);return J(t)}),b=J,Lt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Tt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),O=tinymce.util.Tools.resolve("tinymce.util.VK"),wt=Object.keys,At=("undefined"==typeof window&&Function("return this;")(),function(e){return v(e.dom.childNodes,b)}),y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),N=tinymce.util.Tools.resolve("tinymce.util.Tools"),L=o(/^(OL|UL|DL)$/),xt=o(/^(OL|UL)$/),kt=ge("ol"),Dt=o(/^(LI|DT|DD)$/),Et=o(/^(DT|DD)$/),Bt=o(/^(TH|TD)$/),T=ge("br"),w=y.DOM,It=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),A=function(e,t){t=t||e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",x(e,t))},Pt=function(e){var t=A(e),e=e.selection.getSelectedBlocks();return t&&1===e.length&&e[0]===t?N.grep(t.querySelectorAll("ol,ul,dl"),function(e){return L(e)}):N.grep(e,function(e){return L(e)&&t!==e})},Rt=function(e){var t,n=e.selection.getSelectedBlocks();return N.grep((t=e,e=N.map(n,function(e){return t.dom.getParent(e,"li,dd,dt",x(t,e))||e}),It.unique(e)),function(e){return Dt(e)})},x=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},Mt=function(e,t){e=e.dom.getParents(t,"ol,ul",x(e,t));return a(e)},k=function(e,t,n){return e.fire("ListMutation",{action:t,element:n})},D=function(e){return r(e,"OL,UL")},Ut=function(n,a,s,u){return ue(u).filter(D).fold(function(){a.each(function(e){ee(e.start,u)&&s.set(!0)});r=u,o=n,i=s.get();var r,o,i,e=ae(r).filter(oe).map(function(e){return{depth:o,dirty:!1,isSelected:i,content:(n=At(t=r),t=ce(t).map(D).getOr(!1)?n.slice(0,-1):n,v(t,me)),itemAttributes:ie(r),listAttributes:ie(e),listType:re(e)};var t,n}),t=(a.each(function(e){ee(e.end,u)&&s.set(!1)}),ce(u).filter(D).map(function(e){return E(n,a,s,e)}).getOr([]));return e.toArray().concat(t)},function(e){return E(n,a,s,e)})},E=function(t,n,r,e){return ut(At(e),function(e){return(D(e)?E:Ut)(t+1,n,r,e)})},_t=function(e,t){var n,r,o=v(Ne(e),b),i=v(j(Rt(e),Et),b),a=!1;return(o.length||i.length)&&(n=e.selection.getBookmark(),Re(e,o,t),r=e,l(i,"Indent"===t?be:function(e){return Ce(r,e),0}),e.selection.moveToBookmark(n),e.selection.setRng(p(e.selection.getRng())),e.nodeChanged(),a=!0),a},$t=function(e){return _t(e,"Indent")},Ft=function(e){return _t(e,"Outdent")},B=function(e){return _t(e,"Flatten")},jt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),I=y.DOM,P=function(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=I.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):I.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i},R=function(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,I.remove(t),!n.hasChildNodes())&&I.isBlock(n)&&n.appendChild(I.create("br")),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=I.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),p(t)},qt=function(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ht=function(e){return/\btox\-/.test(e.className)},Kt=function(e,t,n){var r,o=e,i=n["list-style-type"]?n["list-style-type"]:null;o.setStyle(t,"list-style-type",i),o=e,Ue(i=t,(r=n)["list-attributes"]),N.each(o.select("li",i),function(e){Ue(e,r["list-item-attributes"])})},Vt=function(a,s,u){var e,t=a.selection.getRng(),c="LI",n=x(a,a.selection.getStart(!0)),l=a.dom;"false"!==l.getContentEditable(a.selection.getNode())&&("DL"===(s=s.toUpperCase())&&(c="DT"),e=P(t),t=function(n,e,r){for(var o,i=[],a=n.dom,t=_e(n,e,!0,r),s=_e(n,e,!1,r),u=[],c=t;c&&(u.push(c),c!==s);c=c.nextSibling);return N.each(u,function(e){var t;he(n,e)?(i.push(e),o=null):a.isBlock(e)||T(e)?(T(e)&&a.remove(e),o=null):(t=e.nextSibling,jt.isBookmarkNode(e)&&(L(t)||he(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=a.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e)))}),i}(a,t,n),N.each(t,function(e){var t,n,r,o=e.previousSibling,i=e.parentNode;Dt(i)||(o&&L(o)&&o.nodeName===s&&(i=u,l.getStyle(o,"list-style-type")===(null===(i=i?i["list-style-type"]:"")?"":i))?(t=o,e=l.rename(e,c),o.appendChild(e)):(t=l.create(s),e.parentNode.insertBefore(t,e),t.appendChild(e),e=l.rename(e,c)),n=l,r=e,N.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],function(e){var t;return n.setStyle(r,((t={})[e]="",t))}),Kt(l,t,u),Qt(a.dom,t))}),a.selection.setRng(R(e)))},Wt=function(e,t,n){return o=n,(r=t)&&o&&L(r)&&r.nodeName===o.nodeName&&(r=n,(o=e).getStyle(t,"list-style-type",!0)===o.getStyle(r,"list-style-type",!0))&&t.className===n.className;var r,o},Qt=function(e,t){var n,r=t.nextSibling;if(Wt(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,Wt(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},Xt=function(i,e,t,a,s){var n,r=L(e);r&&e.nodeName===a&&!zt(s)?B(i):(Vt(i,a,s),n=P(i.selection.getRng(!0)),r=r?function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}([e],t):t,N.each(r,function(e){var t,n=i,r=a,o=s;(e=e).nodeName!==r?(t=n.dom.rename(e,r),Kt(n.dom,t,o),k(n,qt(r),t)):(Kt(n.dom,e,o),k(n,qt(r),e))}),i.selection.setRng(R(n)))},zt=function(e){return"list-style-type"in e},Yt=y.DOM,Zt=function(o,e){N.each(N.grep(o.select("ol,ul",e)),function(e){var t,n,r=o;"LI"===(n=(e=e).parentNode).nodeName&&n.firstChild===e&&((t=n.previousSibling)&&"LI"===t.nodeName?(t.appendChild(e),m(r,n)&&Yt.remove(n)):Yt.setStyle(n,"listStyleType","none")),L(n)&&(t=n.previousSibling)&&"LI"===t.nodeName&&t.appendChild(e)})},Gt=function(u,c){var e=u.dom,t=u.selection,n=t.getStart(),n=x(u,n),l=e.getParent(t.getStart(),"LI",n);if(l){var r=l.parentNode;if(r===u.getBody()&&m(e,r))return!0;var d=p(t.getRng()),f=e.getParent(Fe(u,d,c,n),"LI",n);if(f&&f!==l)return u.undoManager.transact(function(){var e,t,n,r,o,i,a,s;c?(t=d,n=f,r=l,(s=(e=u).dom).isEmpty(r)?(i=n,(o=e).dom.$(a=r).empty(),qe(o.dom,i,a),o.selection.setCursorLocation(a,0)):(i=P(t),qe(s,n,r),e.selection.setRng(R(i)))):l.parentNode.firstChild===l?Ft(u):(o=u,a=l,t=f,s=P(d),qe(o.dom,a,t),a=R(s),o.selection.setRng(a))}),!0;if(!f&&!c&&0===d.startOffset&&0===d.endOffset)return u.undoManager.transact(function(){B(u)}),!0}return!1},Jt=function(r,o){var i=r.dom,e=r.selection.getStart(),a=x(r,e),s=i.getParent(e,i.isBlock,a);if(s&&i.isEmpty(s)){var e=p(r.selection.getRng()),u=i.getParent(Fe(r,e,o,a),"LI",a);if(u)return r.undoManager.transact(function(){var e,t=s,n=(e=i).getParent(t.parentNode,e.isBlock,a);e.remove(t),n&&e.isEmpty(n)&&e.remove(n),Qt(i,u.parentNode),r.selection.select(u,!0),r.selection.collapse(o)}),!0}return!1},en=function(t){var e,n=A(t);kt(n)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(n={start:t.dom.getAttrib(n,"start","1"),listStyleType:h.some(t.dom.getStyle(n,"list-style-type"))},e=parseInt(n.start,10),n.listStyleType.is("upper-alpha")?Ve(e):n.listStyleType.is("lower-alpha")?Ve(e).toLowerCase():n.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){(function(e){switch(/^[0-9]+$/.test(t=e)?2:/^[A-Z]+$/.test(t)?0:/^[a-z]+$/.test(t)?1:0<t.length?4:3){case 2:return h.some({listStyleType:h.none(),start:e});case 0:return h.some({listStyleType:h.some("upper-alpha"),start:Ke(e).toString()});case 1:return h.some({listStyleType:h.some("lower-alpha"),start:Ke(e).toString()});case 3:return h.some({listStyleType:h.none(),start:""});case 4:return h.none()}var t})(e.getData().start).each(function(e){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})}),e.close()}})};Ge.add("lists",function(e){var t,n,r,i,o,a,s;return!1===e.hasPlugin("rtc",!0)?((o=e).getParam("lists_indent_on_tab",!0)&&(a=o).on("keydown",function(e){e.keyCode!==O.TAB||O.metaKeyPressed(e)||a.undoManager.transact(function(){(e.shiftKey?Ft:$t)(a)&&e.preventDefault()})}),(s=o).on("keydown",function(e){e.keyCode===O.BACKSPACE?He(s,!1)&&e.preventDefault():e.keyCode===O.DELETE&&He(s,!0)&&e.preventDefault()}),(i=e).on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?$t(i):"outdent"===e&&Ft(i)}),i.addCommand("InsertUnorderedList",function(e,t){$e(i,"UL",t)}),i.addCommand("InsertOrderedList",function(e,t){$e(i,"OL",t)}),i.addCommand("InsertDefinitionList",function(e,t){$e(i,"DL",t)}),i.addCommand("RemoveList",function(){B(i)}),Qe(i),i.addCommand("mceListUpdate",function(e,t){var n,r,o;f(t)&&(r=t,o=A(n=i),n.undoManager.transact(function(){f(r.styles)&&n.dom.setStyles(o,r.styles),f(r.attrs)&&ne(r.attrs,function(e,t){n.dom.setAttrib(o,t,e)})}))}),i.addQueryStateHandler("InsertUnorderedList",We(i,"UL")),i.addQueryStateHandler("InsertOrderedList",We(i,"OL")),i.addQueryStateHandler("InsertDefinitionList",We(i,"DL"))):Qe(e),o=function(e){return function(){return t.execCommand(e)}},(t=e).hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:o("InsertOrderedList"),onSetup:function(e){return Me(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:o("InsertUnorderedList"),onSetup:function(e){return Me(t,"UL",e.setActive)}})),(n=e).ui.registry.addMenuItem("listprops",{text:"List properties...",icon:"ordered-list",onAction:function(){return n.execCommand("mceListProps")},onSetup:function(t){return Me(n,"OL",function(e){t.setDisabled(!e)})}}),n.ui.registry.addContextMenu("lists",{update:function(e){e=A(n,e);return kt(e)?["listprops"]:[]}}),r=e,{backspaceDelete:function(e){He(r,e)}}})}();